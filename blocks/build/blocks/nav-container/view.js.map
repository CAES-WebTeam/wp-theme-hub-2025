{"version":3,"file":"blocks/nav-container/view.js","mappings":"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","sources":["webpack://theme-blocks/./src/blocks/nav-container/view.js"],"sourcesContent":["/**\n * Field Report Navigation JavaScript\n * Handles hover/focus interactions and keyboard accessibility\n */\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Initialize all navigation blocks on the page\n    const navBlocks = document.querySelectorAll('.field-report-navigation');\n    \n    navBlocks.forEach(initNavigation);\n});\n\nfunction initNavigation(nav) {\n    const hoverDelay = parseInt(nav.dataset.hoverDelay) || 300;\n    const submenuItems = nav.querySelectorAll('.nav-item-with-submenu');\n    \n    submenuItems.forEach(item => {\n        const toggle = item.querySelector('.submenu-toggle');\n        const flyout = item.querySelector('.nav-flyout');\n        const primaryLink = item.querySelector('.nav-primary-link');\n        \n        if (!toggle || !flyout) return;\n        \n        let hoverTimer = null;\n        let isOpen = false;\n        \n        // Toggle button click/keyboard activation\n        toggle.addEventListener('click', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            \n            if (isOpen) {\n                closeFlyout();\n            } else {\n                openFlyout();\n            }\n        });\n        \n        // Handle keyboard activation (Enter/Space)\n        toggle.addEventListener('keydown', function(e) {\n            if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                e.stopPropagation();\n                \n                if (isOpen) {\n                    closeFlyout();\n                } else {\n                    openFlyout();\n                }\n            }\n            \n            // Escape key to close\n            if (e.key === 'Escape' && isOpen) {\n                closeFlyout();\n                toggle.focus(); // Return focus to toggle\n            }\n        });\n        \n        // Hover to open (with delay) - covers the entire nav item\n        item.addEventListener('mouseenter', function() {\n            clearTimeout(hoverTimer);\n            hoverTimer = setTimeout(() => {\n                if (!isOpen) {\n                    openFlyout();\n                }\n            }, hoverDelay);\n        });\n        \n        // Mouse leave to close - but only when leaving the entire nav item (including flyout)\n        item.addEventListener('mouseleave', function() {\n            clearTimeout(hoverTimer);\n            if (isOpen) {\n                closeFlyout();\n            }\n        });\n        \n        // Close when focus leaves the entire submenu (for keyboard users)\n        item.addEventListener('focusout', function(e) {\n            // Use setTimeout to allow focus to move to new element\n            setTimeout(() => {\n                // Only close if focus has completely left this nav item\n                if (!item.contains(document.activeElement)) {\n                    closeFlyout();\n                }\n            }, 10);\n        });\n        \n        function openFlyout() {\n            if (isOpen) return;\n            \n            // Close other open flyouts in this navigation\n            nav.querySelectorAll('.nav-item-with-submenu').forEach(otherItem => {\n                if (otherItem !== item) {\n                    const otherToggle = otherItem.querySelector('.submenu-toggle');\n                    const otherFlyout = otherItem.querySelector('.nav-flyout');\n                    if (otherToggle && otherFlyout) {\n                        otherToggle.setAttribute('aria-expanded', 'false');\n                        otherFlyout.style.display = 'none';\n                        otherItem.classList.remove('submenu-open');\n                    }\n                }\n            });\n            \n            isOpen = true;\n            toggle.setAttribute('aria-expanded', 'true');\n            flyout.style.display = 'block';\n            \n            // Add class for CSS animations if desired\n            item.classList.add('submenu-open');\n        }\n        \n        function closeFlyout() {\n            if (!isOpen) return;\n            \n            isOpen = false;\n            toggle.setAttribute('aria-expanded', 'false');\n            flyout.style.display = 'none';\n            item.classList.remove('submenu-open');\n        }\n    });\n    \n    // Close flyouts when clicking outside\n    document.addEventListener('click', function(e) {\n        if (!nav.contains(e.target)) {\n            nav.querySelectorAll('.nav-item-with-submenu').forEach(item => {\n                const toggle = item.querySelector('.submenu-toggle');\n                const flyout = item.querySelector('.nav-flyout');\n                if (toggle && flyout) {\n                    toggle.setAttribute('aria-expanded', 'false');\n                    flyout.style.display = 'none';\n                    item.classList.remove('submenu-open');\n                }\n            });\n        }\n    });\n}"],"names":["document","addEventListener","navBlocks","querySelectorAll","forEach","initNavigation","nav","hoverDelay","parseInt","dataset","submenuItems","item","toggle","querySelector","flyout","primaryLink","hoverTimer","isOpen","e","preventDefault","stopPropagation","closeFlyout","openFlyout","key","focus","clearTimeout","setTimeout","contains","activeElement","otherItem","otherToggle","otherFlyout","setAttribute","style","display","classList","remove","add","target"],"sourceRoot":""}