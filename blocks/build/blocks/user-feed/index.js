(()=>{"use strict";var e,t={3355:(e,t,s)=>{const r=window.wp.blocks,n=window.wp.i18n,l=window.wp.blockEditor,o=window.wp.components,a=window.wp.element,i=window.wp.apiFetch;var u=s.n(i);const p=window.ReactJSXRuntime,d=["","--wp--preset--spacing--20","--wp--preset--spacing--30","--wp--preset--spacing--40","--wp--preset--spacing--50","--wp--preset--spacing--60","--wp--preset--spacing--70","--wp--preset--spacing--80"],c=["None (no gap)","2X-Small","X-Small","Small","Medium","Large","X-Large","2X-Large"],g=JSON.parse('{"UU":"caes-hub/user-feed"}');(0,r.registerBlockType)(g.UU,{edit:function({attributes:e,setAttributes:t}){const{userIds:s=[],feedType:r="hand-picked",numberOfUsers:i=5,customGapStep:g=0,displayLayout:m="list",columns:h=3,gridItemPosition:f="manual",gridAutoColumnWidth:b=12,gridAutoColumnUnit:_="rem"}=e,[v,w]=(0,a.useState)([]),[x,y]=(0,a.useState)([]),[j,C]=(0,a.useState)(!1),[k,S]=(0,a.useState)(""),[T,O]=(0,a.useState)(null);(0,a.useEffect)((()=>{if(0===s.length)return void y([]);const e=s.filter((e=>!x.find((t=>t.id===e))));e.length>0&&u()({path:`/wp/v2/users?include=${e.join(",")}&_fields=id,name,slug`}).then((t=>{const s=t.map((e=>({id:e.id,label:e.name||`User #${e.id}`})));y((t=>[...t.filter((t=>!e.includes(t.id))),...s]))})).catch((e=>{console.error("Error fetching selected users:",e)}))}),[s]),(0,a.useEffect)((()=>()=>{T&&clearTimeout(T)}),[T]);const U=[...x,...v.filter((e=>!x.find((t=>t.id===e.id))))],B=x.filter((e=>s.includes(e.id))).map((e=>e.label)),A=U.map((e=>e.label)),P=`${"grid"===m?`user-feed-grid columns-${h}`:"user-feed-list"} ${g>0?`gap-${d[g].replace(/^--/,"").replace(/--/g,"-")}`:""}`.trim(),G=(0,l.useBlockProps)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(l.InspectorControls,{children:[(0,p.jsxs)(o.PanelBody,{title:(0,n.__)("User Feed Settings","user-feed"),children:[(0,p.jsx)(o.FormTokenField,{label:(0,n.__)("Select Users","user-feed"),value:B,suggestions:A,onInputChange:e=>{S(e),T&&clearTimeout(T);const t=setTimeout((()=>{(e=>{e.length<3?w([]):(C(!0),u()({path:`/wp/v2/users?search=${encodeURIComponent(e)}&per_page=20&_fields=id,name,slug`}).then((e=>{const t=e.map((e=>({id:e.id,label:e.name||`User #${e.id}`})));w(t),C(!1)})).catch((()=>{w([]),C(!1)})))})(e)}),300);O(t)},onChange:e=>{const s=e.map((e=>{const t=U.find((t=>t.label===e));return t?t.id:null})).filter((e=>null!==e));t({userIds:s})},help:k.length>0&&k.length<3?(0,n.__)("Type at least 3 characters to search users","user-feed"):j?(0,n.__)("Searching users...","user-feed"):0===v.length&&k.length>=3?(0,n.__)("No users found. Try a different search term.","user-feed"):(0,n.__)("Search for users to add them to the feed","user-feed")}),j&&(0,p.jsx)(o.Spinner,{})]}),(0,p.jsxs)(o.PanelBody,{title:(0,n.__)("Layout Settings","user-feed"),initialOpen:!1,children:["grid"===m&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(o.__experimentalToggleGroupControl,{label:(0,n.__)("Grid Item Position","user-feed"),value:f,onChange:e=>t({gridItemPosition:e}),isBlock:!0,children:[(0,p.jsx)(o.__experimentalToggleGroupControlOption,{value:"auto",label:"Automatic"}),(0,p.jsx)(o.__experimentalToggleGroupControlOption,{value:"manual",label:"Manual"})]}),"auto"===f&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.__experimentalNumberControl,{label:(0,n.__)("Auto Column Width","user-feed"),value:b,onChange:e=>t({gridAutoColumnWidth:parseFloat(e)}),min:1,step:1}),(0,p.jsx)(o.SelectControl,{label:(0,n.__)("Auto Column Unit","user-feed"),value:_,onChange:e=>t({gridAutoColumnUnit:e}),options:[{value:"rem",label:"rem"},{value:"px",label:"px"},{value:"%",label:"%"}]})]}),"manual"===f&&(0,p.jsx)(o.RangeControl,{label:(0,n.__)("Number of Columns","user-feed"),value:h,onChange:e=>t({columns:e}),min:1,max:16}),(0,p.jsx)(o.RangeControl,{label:(0,n.__)("Gap between items","user-feed"),value:g,onChange:e=>t({customGapStep:e}),min:0,max:d.length-1,step:1,help:c[g]?c[g]:"No gap"})]}),"list"===m&&(0,p.jsx)("p",{children:(0,n.__)("List layout selected. Use grid layout for additional spacing options.","user-feed")})]})]}),(0,p.jsx)(l.BlockControls,{children:(0,p.jsxs)(o.ToolbarGroup,{children:[(0,p.jsx)(o.ToolbarButton,{icon:"list-view",label:(0,n.__)("List View","user-feed"),isPressed:"list"===m,onClick:()=>t({displayLayout:"list"})}),(0,p.jsx)(o.ToolbarButton,{icon:"grid-view",label:(0,n.__)("Grid View","user-feed"),isPressed:"grid"===m,onClick:()=>t({displayLayout:"grid"})})]})}),(0,p.jsx)("div",{...G,children:(0,p.jsxs)("div",{className:P,children:[(!s||0===s.length)&&(0,p.jsx)("p",{className:"user-feed-empty",children:(0,n.__)("Please select one or more users from the sidebar.","user-feed")}),s&&s.length>0&&(0,p.jsx)(l.InnerBlocks,{template:[["core/group",{className:"caes-hub-user-feed-item",style:{spacing:{blockGap:"0"},shadow:"var:preset|shadow|small"},layout:{type:"default"}},[["caes-hub/user-image",{aspectRatio:"3/4"}],["caes-hub/user-image",{mobileVersion:!0,aspectRatio:"3/4"}],["core/group",{style:{spacing:{blockGap:"var:preset|spacing|20",padding:{top:"var:preset|spacing|50",bottom:"var:preset|spacing|60",left:"var:preset|spacing|50",right:"var:preset|spacing|50"}}},layout:{type:"default"}},[["core/group",{style:{typography:{fontStyle:"light",fontWeight:"300",textTransform:"none"}},fontFamily:"oswald",layout:{type:"default"}},[["caes-hub/user-name",{element:"h2",linkToProfile:!0,style:{typography:{textAlign:"center"}}}]]],["caes-hub/user-position",{style:{typography:{lineHeight:"1.2",fontSize:"1.2rem",textAlign:"center"}}}]]]]]],templateLock:!1,renderAppender:l.InnerBlocks.ButtonBlockAppender})]})})]})},save:function(){return(0,p.jsx)(l.InnerBlocks.Content,{})}})}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var l=s[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,s,n,l)=>{if(!s){var o=1/0;for(p=0;p<e.length;p++){for(var[s,n,l]=e[p],a=!0,i=0;i<s.length;i++)(!1&l||o>=l)&&Object.keys(r.O).every((e=>r.O[e](s[i])))?s.splice(i--,1):(a=!1,l<o&&(o=l));if(a){e.splice(p--,1);var u=n();void 0!==u&&(t=u)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[s,n,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={7315:0,3739:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var n,l,[o,a,i]=s,u=0;if(o.some((t=>0!==e[t]))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(i)var p=i(r)}for(t&&t(s);u<o.length;u++)l=o[u],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(p)},s=globalThis.webpackChunktheme_blocks=globalThis.webpackChunktheme_blocks||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=r.O(void 0,[3739],(()=>r(3355)));n=r.O(n)})();