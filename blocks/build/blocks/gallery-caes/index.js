(()=>{"use strict";var e,l={3291:()=>{const e=window.wp.blocks,l=window.wp.i18n,a=window.wp.blockEditor,i=window.wp.components,s=window.wp.element,o=window.ReactJSXRuntime,t=JSON.parse('{"UU":"caes-hub/caes-gallery"}');(0,e.registerBlockType)(t.UU,{edit:({attributes:e,setAttributes:t})=>{const{rows:r,cropImages:n,showCaptions:c,captionTextColor:d,captionBackgroundColor:g,useThumbnailTrigger:p}=e,[h,x]=(0,s.useState)(!1),[m,y]=(0,s.useState)(!1),[u,j]=(0,s.useState)(!1);(0,s.useEffect)((()=>{0===r.length&&t({rows:[{columns:3,images:[]}]})}),[]);const b=(e,l,a,i)=>{const s=[...r];s[e].images[l][a]=i,t({rows:s})},_=({color:e,onClick:l,label:a})=>(0,o.jsx)(i.Button,{onClick:l,style:{width:"36px",height:"36px",padding:"0",border:"1px solid #949494",borderRadius:"4px",background:e,minWidth:"36px"},"aria-label":a}),v=(0,a.useBlockProps)({className:"caes-gallery-block"}),C={position:"absolute",bottom:0,left:0,right:0,padding:"8px 12px",color:d,backgroundColor:g,fontSize:"14px",lineHeight:"1.4",margin:0},w={position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:"calc(100% - 2rem)",backgroundColor:"#000",color:"#fff",padding:"1rem",textAlign:"left",fontSize:"1rem",fontFamily:"inherit",border:0},k=r.reduce(((e,l)=>e.concat(l.images||[])),[])[0],f=()=>(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)("img",{src:k.sizes?.large?.url||k.url,alt:k.alt||"",style:{width:"100%",height:"auto",display:"block"}}),(0,o.jsx)("div",{style:w,children:(0,l.__)("View Gallery","caes-gallery")})]});return h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.BlockControls,{children:(0,o.jsx)(i.ToolbarGroup,{children:(0,o.jsx)(i.ToolbarButton,{onClick:()=>x(!1),icon:"edit",children:(0,l.__)("Edit","caes-gallery")})})}),(0,o.jsxs)(a.InspectorControls,{children:[(0,o.jsxs)(i.PanelBody,{title:(0,l.__)("Gallery Settings","caes-gallery"),children:[(0,o.jsx)(i.ToggleControl,{label:(0,l.__)("Use only first image for thumbnail","caes-gallery"),checked:p,onChange:e=>t({useThumbnailTrigger:e}),help:(0,l.__)('Show a single image with a "View Gallery" button that opens the full gallery.',"caes-gallery")}),!p&&(0,o.jsx)(i.ToggleControl,{label:(0,l.__)("Crop images to fit","caes-gallery"),checked:n,onChange:e=>t({cropImages:e}),help:(0,l.__)("Images are cropped to maintain a consistent height and eliminate gaps.","caes-gallery")})]}),!p&&(0,o.jsxs)(i.PanelBody,{title:(0,l.__)("Caption Settings","caes-gallery"),children:[(0,o.jsx)(i.ToggleControl,{label:(0,l.__)("Show captions on thumbnails","caes-gallery"),checked:c,onChange:e=>t({showCaptions:e}),help:(0,l.__)("Display image captions as overlays on the thumbnail images.","caes-gallery")}),c&&(0,o.jsxs)(i.__experimentalVStack,{spacing:4,style:{marginTop:"16px"},children:[(0,o.jsxs)(i.__experimentalHStack,{alignment:"left",children:[(0,o.jsx)("span",{style:{minWidth:"120px"},children:(0,l.__)("Text Color","caes-gallery")}),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(_,{color:d,onClick:()=>y(!m),label:(0,l.__)("Select text color","caes-gallery")}),m&&(0,o.jsx)(i.Popover,{position:"bottom left",onClose:()=>y(!1),children:(0,o.jsx)("div",{style:{padding:"16px"},children:(0,o.jsx)(i.ColorPicker,{color:d,onChange:e=>t({captionTextColor:e}),enableAlpha:!0})})})]})]}),(0,o.jsxs)(i.__experimentalHStack,{alignment:"left",children:[(0,o.jsx)("span",{style:{minWidth:"120px"},children:(0,l.__)("Background Color","caes-gallery")}),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(_,{color:g,onClick:()=>j(!u),label:(0,l.__)("Select background color","caes-gallery")}),u&&(0,o.jsx)(i.Popover,{position:"bottom left",onClose:()=>j(!1),children:(0,o.jsx)("div",{style:{padding:"16px"},children:(0,o.jsx)(i.ColorPicker,{color:g,onChange:e=>t({captionBackgroundColor:e}),enableAlpha:!0})})})]})]})]})]})]}),(0,o.jsx)("div",{...v,children:p&&k?(0,o.jsx)(f,{}):(0,o.jsx)("div",{className:"caes-gallery-preview",children:r.map(((e,l)=>{var a,i;const s=null!==(a=e.columns)&&void 0!==a?a:3,t=null!==(i=e.images)&&void 0!==i?i:[];return 0===t.length?null:(0,o.jsx)("div",{className:`gallery-row gallery-row-${s}-cols${n?" is-cropped":""}${c?" has-captions":""}`,style:n?{marginBottom:"1rem"}:{display:"grid",gridTemplateColumns:`repeat(${s}, 1fr)`,gap:"1rem",marginBottom:"1rem"},children:t.map((e=>(0,o.jsx)("div",{className:"gallery-item",children:(0,o.jsxs)("div",{style:{display:"block",overflow:"hidden",cursor:"pointer",position:"relative"},children:[(0,o.jsx)("img",{src:e.url,alt:e.alt||"",style:{width:"100%",height:n?"100%":"auto",display:"block",objectFit:n?"cover":"initial"}}),c&&e.caption&&(0,o.jsx)("figcaption",{style:C,children:e.caption})]})},e.id)))},l)}))})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.BlockControls,{children:(0,o.jsx)(i.ToolbarGroup,{children:(0,o.jsx)(i.ToolbarButton,{onClick:()=>x(!0),icon:"visibility",children:(0,l.__)("Preview","caes-gallery")})})}),(0,o.jsxs)(a.InspectorControls,{children:[(0,o.jsxs)(i.PanelBody,{title:(0,l.__)("Gallery Settings","caes-gallery"),children:[(0,o.jsx)(i.ToggleControl,{label:(0,l.__)("Use only first image for thumbnail","caes-gallery"),checked:p,onChange:e=>t({useThumbnailTrigger:e}),help:(0,l.__)('Show a single image with a "View Gallery" button that opens the full gallery.',"caes-gallery")}),!p&&(0,o.jsx)(i.ToggleControl,{label:(0,l.__)("Crop images to fit","caes-gallery"),checked:n,onChange:e=>t({cropImages:e}),help:(0,l.__)("Images are cropped to maintain a consistent height and eliminate gaps.","caes-gallery")})]}),!p&&(0,o.jsxs)(i.PanelBody,{title:(0,l.__)("Caption Settings","caes-gallery"),children:[(0,o.jsx)(i.ToggleControl,{label:(0,l.__)("Show captions on thumbnails","caes-gallery"),checked:c,onChange:e=>t({showCaptions:e}),help:(0,l.__)("Display image captions as overlays on the thumbnail images.","caes-gallery")}),c&&(0,o.jsxs)(i.__experimentalVStack,{spacing:4,style:{marginTop:"16px"},children:[(0,o.jsxs)(i.__experimentalHStack,{alignment:"left",children:[(0,o.jsx)("span",{style:{minWidth:"120px"},children:(0,l.__)("Text Color","caes-gallery")}),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(_,{color:d,onClick:()=>y(!m),label:(0,l.__)("Select text color","caes-gallery")}),m&&(0,o.jsx)(i.Popover,{position:"bottom left",onClose:()=>y(!1),children:(0,o.jsx)("div",{style:{padding:"16px"},children:(0,o.jsx)(i.ColorPicker,{color:d,onChange:e=>t({captionTextColor:e}),enableAlpha:!0})})})]})]}),(0,o.jsxs)(i.__experimentalHStack,{alignment:"left",children:[(0,o.jsx)("span",{style:{minWidth:"120px"},children:(0,l.__)("Background Color","caes-gallery")}),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(_,{color:g,onClick:()=>j(!u),label:(0,l.__)("Select background color","caes-gallery")}),u&&(0,o.jsx)(i.Popover,{position:"bottom left",onClose:()=>j(!1),children:(0,o.jsx)("div",{style:{padding:"16px"},children:(0,o.jsx)(i.ColorPicker,{color:g,onChange:e=>t({captionBackgroundColor:e}),enableAlpha:!0})})})]})]})]})]})]}),(0,o.jsx)("div",{...v,children:(0,o.jsxs)("div",{className:"caes-gallery-editor",children:[(0,o.jsxs)("div",{className:"gallery-header",children:[(0,o.jsx)("h3",{children:(0,l.__)("Gallery (CAES) Setup","caes-gallery")}),(0,o.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,o.jsx)(i.Button,{onClick:()=>x(!h),variant:"secondary",icon:h?"edit":"visibility",children:h?(0,l.__)("Edit","caes-gallery"):(0,l.__)("Preview","caes-gallery")}),(0,o.jsx)(i.Button,{onClick:()=>{const e=[...r,{columns:3,images:[]}];t({rows:e})},variant:"primary",children:(0,l.__)("Add Row","caes-gallery")})]})]}),p&&k&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{style:{margin:"0 0 12px 0",color:"#1e1e1e",fontSize:"13px"},children:(0,l.__)("Thumbnail trigger is on. The first image will be used to open the gallery.","caes-gallery")}),(0,o.jsx)("div",{style:{marginBottom:"20px"},children:(0,o.jsx)(f,{})})]}),p&&!k&&(0,o.jsx)(i.Notice,{status:"warning",isDismissible:!1,style:{marginBottom:"16px"},children:(0,l.__)("Add images to a row below to see the thumbnail trigger preview.","caes-gallery")}),0===r.length&&(0,o.jsx)(i.Notice,{status:"warning",isDismissible:!1,children:(0,l.__)("Add a row to start building your gallery.","caes-gallery")}),r.map(((e,s)=>(0,o.jsxs)("div",{className:"gallery-row-editor",style:{border:"1px solid #ddd",borderRadius:"4px",padding:"16px",marginBottom:"16px",backgroundColor:"#f9f9f9"},children:[(0,o.jsxs)("div",{className:"row-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid #ddd"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,o.jsxs)("strong",{children:[(0,l.__)("Row","caes-gallery")," ",s+1]}),!p&&(0,o.jsx)(i.SelectControl,{label:(0,l.__)("Columns","caes-gallery"),value:e.columns,options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6}],onChange:e=>((e,l)=>{const a=[...r];a[e].columns=parseInt(l),t({rows:a})})(s,e),style:{marginBottom:0}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,o.jsx)(i.Button,{onClick:()=>(e=>{if(0===e)return;const l=[...r];[l[e-1],l[e]]=[l[e],l[e-1]],t({rows:l})})(s),variant:"secondary",disabled:0===s,icon:"arrow-up-alt2",label:(0,l.__)("Move Up","caes-gallery")}),(0,o.jsx)(i.Button,{onClick:()=>(e=>{if(e===r.length-1)return;const l=[...r];[l[e],l[e+1]]=[l[e+1],l[e]],t({rows:l})})(s),variant:"secondary",disabled:s===r.length-1,icon:"arrow-down-alt2",label:(0,l.__)("Move Down","caes-gallery")}),(0,o.jsx)(i.Button,{onClick:()=>(e=>{const l=[...r];l.splice(e,1),t({rows:l})})(s),variant:"secondary",isDestructive:!0,disabled:1===r.length,icon:"trash",label:(0,l.__)("Remove Row","caes-gallery")})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,o.jsx)(a.MediaUploadCheck,{children:(0,o.jsx)(a.MediaUpload,{onSelect:e=>((e,l)=>{const a=[...r];a[e].images=l.map((e=>({id:e.id,url:e.url,alt:e.alt||"",caption:e.caption||"",sizes:e.sizes||{}}))),t({rows:a})})(s,e),allowedTypes:["image"],multiple:!0,gallery:!0,value:e.images.map((e=>e.id)),render:({open:a})=>(0,o.jsx)(i.Button,{onClick:a,variant:"secondary",children:e.images.length>0?(0,l.__)("Edit Images","caes-gallery"):(0,l.__)("Add Images","caes-gallery")})})}),(0,o.jsxs)("span",{style:{marginLeft:"12px",color:"#666"},children:[e.images.length," ",1===e.images.length?(0,l.__)("image","caes-gallery"):(0,l.__)("images","caes-gallery")]})]}),e.images.length>0&&(0,o.jsx)("div",{className:`gallery-row gallery-row-${e.columns}-cols${n?" is-cropped":""}${c?" has-captions":""}`,style:n?{marginBottom:"1rem"}:{display:"grid",gridTemplateColumns:`repeat(${e.columns}, 1fr)`,gap:"1rem",marginBottom:"1rem"},children:e.images.map(((e,a)=>(0,o.jsxs)("div",{className:"gallery-item",style:{position:"relative"},children:[(0,o.jsxs)("div",{style:{display:"block",overflow:"hidden",position:"relative"},children:[(0,o.jsx)("img",{src:e.url,alt:e.alt||"",style:{width:"100%",height:n?"100%":"auto",display:"block",objectFit:n?"cover":"initial"}}),c&&e.caption&&!p&&(0,o.jsx)("figcaption",{style:C,children:e.caption})]}),(0,o.jsx)(i.Button,{onClick:()=>((e,l)=>{const a=[...r];a[e].images.splice(l,1),t({rows:a})})(s,a),variant:"secondary",isDestructive:!0,icon:"no",label:(0,l.__)("Remove image","caes-gallery"),style:{position:"absolute",top:"4px",right:"4px",minWidth:"auto",padding:"4px",backgroundColor:"rgba(255, 255, 255, 0.9)",zIndex:10}})]},e.id)))}),e.images.length>0&&(0,o.jsxs)("details",{style:{marginTop:"16px"},children:[(0,o.jsx)("summary",{style:{cursor:"pointer",fontWeight:500,marginBottom:"12px"},children:(0,l.__)("Edit Image Details (Alt Text & Captions)","caes-gallery")}),(0,o.jsx)("div",{className:"images-details-editor",children:e.images.map(((e,a)=>(0,o.jsxs)("div",{className:"image-detail-item",style:{display:"flex",gap:"12px",padding:"12px",backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"4px",marginBottom:"8px"},children:[(0,o.jsx)("div",{style:{flexShrink:0},children:(0,o.jsx)("img",{src:e.sizes?.thumbnail?.url||e.url,alt:"",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px"}})}),(0,o.jsxs)("div",{style:{flexGrow:1},children:[(0,o.jsxs)("label",{style:{display:"block",marginBottom:"8px"},children:[(0,o.jsx)("strong",{children:(0,l.__)("Alt Text:","caes-gallery")}),(0,o.jsx)("input",{type:"text",value:e.alt||"",onChange:e=>b(s,a,"alt",e.target.value),placeholder:(0,l.__)("Describe this image...","caes-gallery"),style:{width:"100%",marginTop:"4px",padding:"6px 8px"}})]}),(0,o.jsxs)("label",{style:{display:"block"},children:[(0,o.jsx)("strong",{children:(0,l.__)("Caption:","caes-gallery")}),(0,o.jsx)("input",{type:"text",value:e.caption||"",onChange:e=>b(s,a,"caption",e.target.value),placeholder:(0,l.__)("Image caption...","caes-gallery"),style:{width:"100%",marginTop:"4px",padding:"6px 8px"}})]})]})]},e.id)))})]})]},s)))]})})]})},save:()=>null})}},a={};function i(e){var s=a[e];if(void 0!==s)return s.exports;var o=a[e]={exports:{}};return l[e](o,o.exports,i),o.exports}i.m=l,e=[],i.O=(l,a,s,o)=>{if(!a){var t=1/0;for(d=0;d<e.length;d++){for(var[a,s,o]=e[d],r=!0,n=0;n<a.length;n++)(!1&o||t>=o)&&Object.keys(i.O).every((e=>i.O[e](a[n])))?a.splice(n--,1):(r=!1,o<t&&(t=o));if(r){e.splice(d--,1);var c=s();void 0!==c&&(l=c)}}return l}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,s,o]},i.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={8998:0,4186:0};i.O.j=l=>0===e[l];var l=(l,a)=>{var s,o,[t,r,n]=a,c=0;if(t.some((l=>0!==e[l]))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(n)var d=n(i)}for(l&&l(a);c<t.length;c++)o=t[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},a=globalThis.webpackChunktheme_blocks=globalThis.webpackChunktheme_blocks||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))})();var s=i.O(void 0,[4186],(()=>i(3291)));s=i.O(s)})();