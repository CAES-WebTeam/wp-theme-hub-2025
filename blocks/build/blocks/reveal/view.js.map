{"version":3,"file":"blocks/reveal/view.js","mappings":"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","sources":["webpack://theme-blocks/./src/blocks/reveal/view.js"],"sourcesContent":["/**\n * Reveal Block Frontend JavaScript\n *\n * Simple approach: content scrolls naturally, JS only handles\n * background frame transitions based on which content is in view.\n */\n\n( function () {\n\t'use strict';\n\n\tconst prefersReducedMotion = window.matchMedia( '(prefers-reduced-motion: reduce)' ).matches;\n\n\tfunction initRevealBlock( block ) {\n\t\tconst frames = block.querySelectorAll( '.reveal-frame' );\n\t\tconst frameContents = block.querySelectorAll( '.reveal-frame-content' );\n\n\t\tif ( frames.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentFrameIndex = 0;\n\n\t\t/**\n\t\t * Apply transition styles to incoming frame.\n\t\t */\n\t\tfunction applyTransition( frame, type, progress ) {\n\t\t\tif ( prefersReducedMotion ) {\n\t\t\t\ttype = 'fade';\n\t\t\t}\n\n\t\t\tconst clipAmount = ( ( 1 - progress ) * 100 ).toFixed( 2 );\n\n\t\t\tswitch ( type ) {\n\t\t\t\tcase 'fade':\n\t\t\t\t\tframe.style.opacity = progress.toFixed( 3 );\n\t\t\t\t\tframe.style.clipPath = 'none';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'up':\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = `inset(${ clipAmount }% 0 0 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'down':\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = `inset(0 0 ${ clipAmount }% 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left':\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = `inset(0 0 0 ${ clipAmount }%)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = `inset(0 ${ clipAmount }% 0 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tframe.style.opacity = progress >= 0.5 ? '1' : '0';\n\t\t\t\t\tframe.style.clipPath = 'none';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Update which background frame is visible based on content position.\n\t\t */\n\t\tfunction updateFrames() {\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\tconst viewportCenter = viewportHeight / 2;\n\n\t\t\t// Find which content block is most in view (closest to viewport center)\n\t\t\tlet activeIndex = 0;\n\t\t\tlet closestDistance = Infinity;\n\n\t\t\tframeContents.forEach( ( content, index ) => {\n\t\t\t\tconst rect = content.getBoundingClientRect();\n\t\t\t\tconst contentCenter = rect.top + rect.height / 2;\n\t\t\t\tconst distance = Math.abs( contentCenter - viewportCenter );\n\n\t\t\t\t// Only consider if content is at least partially visible\n\t\t\t\tif ( rect.bottom > 0 && rect.top < viewportHeight ) {\n\t\t\t\t\tif ( distance < closestDistance ) {\n\t\t\t\t\t\tclosestDistance = distance;\n\t\t\t\t\t\tactiveIndex = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Also check: if we're past all content, stay on last frame\n\t\t\tconst lastContent = frameContents[ frameContents.length - 1 ];\n\t\t\tif ( lastContent ) {\n\t\t\t\tconst lastRect = lastContent.getBoundingClientRect();\n\t\t\t\tif ( lastRect.bottom < viewportCenter ) {\n\t\t\t\t\tactiveIndex = frameContents.length - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if first content hasn't entered yet\n\t\t\tconst firstContent = frameContents[ 0 ];\n\t\t\tif ( firstContent ) {\n\t\t\t\tconst firstRect = firstContent.getBoundingClientRect();\n\t\t\t\tif ( firstRect.top > viewportCenter ) {\n\t\t\t\t\tactiveIndex = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Calculate transition progress between frames\n\t\t\tlet transitionProgress = 1;\n\t\t\tlet transitioningToIndex = activeIndex;\n\n\t\t\tif ( activeIndex < frameContents.length - 1 ) {\n\t\t\t\tconst currentContent = frameContents[ activeIndex ];\n\t\t\t\tconst nextContent = frameContents[ activeIndex + 1 ];\n\n\t\t\t\tif ( currentContent && nextContent ) {\n\t\t\t\t\tconst currentRect = currentContent.getBoundingClientRect();\n\t\t\t\t\tconst nextRect = nextContent.getBoundingClientRect();\n\n\t\t\t\t\t// Transition starts when current content center passes viewport center\n\t\t\t\t\t// and ends when next content center reaches viewport center\n\t\t\t\t\tconst currentCenter = currentRect.top + currentRect.height / 2;\n\t\t\t\t\tconst nextCenter = nextRect.top + nextRect.height / 2;\n\n\t\t\t\t\tif ( currentCenter < viewportCenter && nextCenter > viewportCenter ) {\n\t\t\t\t\t\t// We're in a transition zone\n\t\t\t\t\t\tconst transitionZone = nextCenter - currentCenter;\n\t\t\t\t\t\tconst progressInZone = viewportCenter - currentCenter;\n\t\t\t\t\t\ttransitionProgress = Math.max( 0, Math.min( 1, progressInZone / transitionZone ) );\n\t\t\t\t\t\ttransitioningToIndex = activeIndex + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update frame visibility\n\t\t\tframes.forEach( ( frame, index ) => {\n\t\t\t\t// Disable CSS transitions for manual scrubbing\n\t\t\t\tframe.style.transitionDuration = '0ms';\n\n\t\t\t\tif ( index < activeIndex ) {\n\t\t\t\t\t// Past frames: hidden\n\t\t\t\t\tframe.classList.remove( 'is-active' );\n\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\tframe.style.clipPath = 'inset(0 0 0 0)';\n\t\t\t\t\tframe.style.zIndex = '0';\n\t\t\t\t} else if ( index === activeIndex ) {\n\t\t\t\t\t// Current frame: fully visible\n\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = 'none';\n\t\t\t\t\tframe.style.zIndex = '1';\n\t\t\t\t} else if ( index === transitioningToIndex && transitionProgress > 0 && transitionProgress < 1 ) {\n\t\t\t\t\t// Next frame: transitioning in\n\t\t\t\t\tconst type = frame.dataset.transitionType || 'fade';\n\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t\tframe.style.zIndex = '2';\n\t\t\t\t\tapplyTransition( frame, type, transitionProgress );\n\t\t\t\t} else {\n\t\t\t\t\t// Future frames: hidden\n\t\t\t\t\tframe.classList.remove( 'is-active' );\n\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\tframe.style.clipPath = 'inset(0 0 100% 0)';\n\t\t\t\t\tframe.style.zIndex = '0';\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tcurrentFrameIndex = activeIndex;\n\t\t}\n\n\t\t// Throttle scroll updates\n\t\tlet ticking = false;\n\t\tfunction onScroll() {\n\t\t\tif ( ! ticking ) {\n\t\t\t\twindow.requestAnimationFrame( () => {\n\t\t\t\t\tupdateFrames();\n\t\t\t\t\tticking = false;\n\t\t\t\t} );\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener( 'scroll', onScroll, { passive: true } );\n\t\twindow.addEventListener( 'resize', updateFrames );\n\n\t\t// Initial update\n\t\tupdateFrames();\n\n\t\t// Cleanup function\n\t\tblock._revealCleanup = function () {\n\t\t\twindow.removeEventListener( 'scroll', onScroll );\n\t\t\twindow.removeEventListener( 'resize', updateFrames );\n\t\t};\n\t}\n\n\tfunction initAllBlocks() {\n\t\tconst blocks = document.querySelectorAll( '.caes-reveal' );\n\t\tblocks.forEach( initRevealBlock );\n\t}\n\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initAllBlocks );\n\t} else {\n\t\tinitAllBlocks();\n\t}\n} )();"],"names":["prefersReducedMotion","window","matchMedia","matches","initRevealBlock","block","frames","querySelectorAll","frameContents","length","currentFrameIndex","applyTransition","frame","type","progress","clipAmount","toFixed","style","opacity","clipPath","updateFrames","viewportHeight","innerHeight","viewportCenter","activeIndex","closestDistance","Infinity","forEach","content","index","rect","getBoundingClientRect","contentCenter","top","height","distance","Math","abs","bottom","lastContent","lastRect","firstContent","firstRect","transitionProgress","transitioningToIndex","currentContent","nextContent","currentRect","nextRect","currentCenter","nextCenter","transitionZone","progressInZone","max","min","transitionDuration","classList","remove","zIndex","add","dataset","transitionType","ticking","onScroll","requestAnimationFrame","addEventListener","passive","_revealCleanup","removeEventListener","initAllBlocks","blocks","document","readyState"],"sourceRoot":""}