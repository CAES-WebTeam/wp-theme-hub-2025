{"version":3,"file":"blocks/reveal/view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAE,YAAY;EACb,YAAY;;EAEZ,MAAMA,oBAAoB,GAAGC,MAAM,CAACC,UAAU,CAAE,kCAAmC,CAAC,CAACC,OAAO;EAE5F,SAASC,eAAeA,CAAEC,KAAK,EAAG;IACjC,MAAMC,MAAM,GAAGD,KAAK,CAACE,gBAAgB,CAAE,eAAgB,CAAC;IACxD,MAAMC,aAAa,GAAGH,KAAK,CAACE,gBAAgB,CAAE,uBAAwB,CAAC;IAEvE,IAAKD,MAAM,CAACG,MAAM,KAAK,CAAC,EAAG;MAC1B;IACD;IAEA,MAAMC,UAAU,GAAGJ,MAAM,CAACG,MAAM;IAChC,IAAIE,OAAO,GAAG,KAAK;;IAEnB;IACA,MAAMC,gBAAgB,GAAG;MAAEC,IAAI,EAAE,GAAG;MAAEC,MAAM,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAI,CAAC;;IAE5D;IACA,MAAMC,mBAAmB,GAAG,EAAE;IAC9BV,MAAM,CAACW,OAAO,CAAIC,KAAK,IAAM;MAC5B,MAAMC,KAAK,GAAGD,KAAK,CAACE,OAAO,CAACC,eAAe,IAAI,QAAQ;MACvD,MAAMC,UAAU,GAAGV,gBAAgB,CAAEO,KAAK,CAAE,IAAI,CAAC;MACjD;MACAH,mBAAmB,CAACO,IAAI,CAAEtB,MAAM,CAACuB,WAAW,GAAG,GAAG,GAAGF,UAAW,CAAC;IAClE,CAAE,CAAC;;IAEH;AACF;AACA;IACE,SAASG,mBAAmBA,CAAEC,IAAI,EAAEC,QAAQ,EAAG;MAC9C,IAAK3B,oBAAoB,EAAG;QAC3B0B,IAAI,GAAG,MAAM;MACd;MAEA,IAAIE,MAAM,GAAG;QACZC,OAAO,EAAE,GAAG;QACZC,QAAQ,EAAE;MACX,CAAC;MAED,MAAMC,UAAU,GAAG,CAAE,CAAE,CAAC,GAAGJ,QAAQ,IAAK,GAAG,EAAGK,OAAO,CAAE,CAAE,CAAC;MAE1D,QAASN,IAAI;QACZ,KAAK,MAAM;UACVE,MAAM,CAACC,OAAO,GAAGF,QAAQ,CAACK,OAAO,CAAE,CAAE,CAAC;UACtCJ,MAAM,CAACE,QAAQ,GAAG,MAAM;UACxB;QACD,KAAK,IAAI;UACRF,MAAM,CAACE,QAAQ,GAAG,SAAUC,UAAU,UAAW;UACjD;QACD,KAAK,MAAM;UACVH,MAAM,CAACE,QAAQ,GAAG,aAAcC,UAAU,MAAO;UACjD;QACD,KAAK,MAAM;UACVH,MAAM,CAACE,QAAQ,GAAG,eAAgBC,UAAU,IAAK;UACjD;QACD,KAAK,OAAO;UACXH,MAAM,CAACE,QAAQ,GAAG,WAAYC,UAAU,QAAS;UACjD;QACD;UACCH,MAAM,CAACC,OAAO,GAAGF,QAAQ,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG;UAC5CC,MAAM,CAACE,QAAQ,GAAG,MAAM;UACxB;MACF;MAEA,OAAOF,MAAM;IACd;IAEA,SAASK,iBAAiBA,CAAA,EAAG;MAC5B,MAAMC,cAAc,GAAGjC,MAAM,CAACuB,WAAW;;MAEzC;MACA;MACA;;MAEA,IAAIW,gBAAgB,GAAG,CAAC;MACxB,IAAIC,kBAAkB,GAAG,CAAC;MAC1B,IAAIC,oBAAoB,GAAG,CAAC,CAAC;MAE7B,KAAM,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9B,aAAa,CAACC,MAAM,EAAE6B,CAAC,EAAE,EAAG;QAChD,MAAMC,OAAO,GAAG/B,aAAa,CAAE8B,CAAC,CAAE;QAClC,MAAME,IAAI,GAAGD,OAAO,CAACE,qBAAqB,CAAC,CAAC;QAC5C,MAAMC,WAAW,GAAGlC,aAAa,CAAE8B,CAAC,GAAG,CAAC,CAAE;;QAE1C;QACA;;QAEA,IAAKE,IAAI,CAACG,GAAG,GAAGT,cAAc,IAAIM,IAAI,CAACI,MAAM,GAAG,CAAC,EAAG;UACnD;UACAT,gBAAgB,GAAGG,CAAC;;UAEpB;UACA;UACA,IAAKI,WAAW,IAAIF,IAAI,CAACI,MAAM,GAAGV,cAAc,GAAG,GAAG,EAAG;YACxD,MAAMW,QAAQ,GAAGH,WAAW,CAACD,qBAAqB,CAAC,CAAC;YACpD,MAAMK,kBAAkB,GAAG9B,mBAAmB,CAAEsB,CAAC,GAAG,CAAC,CAAE,IAAMJ,cAAc,GAAG,GAAK;;YAEnF;YACA;YACA,MAAMa,QAAQ,GAAGP,IAAI,CAACI,MAAM;YAC5B,MAAMI,MAAM,GAAGC,IAAI,CAACC,GAAG,CAAEL,QAAQ,CAACF,GAAG,EAAET,cAAc,GAAG,GAAI,CAAC;YAE7D,IAAKa,QAAQ,GAAGC,MAAM,EAAG;cACxB;cACAZ,kBAAkB,GAAGa,IAAI,CAACE,GAAG,CAAE,CAAC,EAAEF,IAAI,CAACC,GAAG,CAAE,CAAC,EAC5C,CAAEhB,cAAc,GAAG,GAAG,GAAGM,IAAI,CAACI,MAAM,IAAKE,kBAC1C,CAAE,CAAC;cACHT,oBAAoB,GAAGC,CAAC,GAAG,CAAC;YAC7B;UACD;UACA;QACD,CAAC,MAAM,IAAKE,IAAI,CAACI,MAAM,IAAI,CAAC,EAAG;UAC9B;UACAT,gBAAgB,GAAGG,CAAC,GAAG,CAAC;QACzB,CAAC,MAAM,IAAKE,IAAI,CAACG,GAAG,IAAIT,cAAc,EAAG;UACxC;UACAC,gBAAgB,GAAGc,IAAI,CAACE,GAAG,CAAE,CAAC,EAAEb,CAAC,GAAG,CAAE,CAAC;;UAEvC;UACA,IAAKA,CAAC,GAAG,CAAC,EAAG;YACZ,MAAMc,WAAW,GAAG5C,aAAa,CAAE8B,CAAC,GAAG,CAAC,CAAE;YAC1C,MAAMe,QAAQ,GAAGD,WAAW,CAACX,qBAAqB,CAAC,CAAC;YAEpD,IAAKY,QAAQ,CAACT,MAAM,GAAGV,cAAc,GAAG,GAAG,EAAG;cAC7C,MAAMY,kBAAkB,GAAG9B,mBAAmB,CAAEsB,CAAC,CAAE,IAAMJ,cAAc,GAAG,GAAK;cAC/EE,kBAAkB,GAAGa,IAAI,CAACE,GAAG,CAAE,CAAC,EAAEF,IAAI,CAACC,GAAG,CAAE,CAAC,EAC5C,CAAEhB,cAAc,GAAG,GAAG,GAAGmB,QAAQ,CAACT,MAAM,IAAKE,kBAC9C,CAAE,CAAC;cACHT,oBAAoB,GAAGC,CAAC;cACxBH,gBAAgB,GAAGG,CAAC,GAAG,CAAC;YACzB;UACD;UACA;QACD;MACD;;MAEA;MACAH,gBAAgB,GAAGc,IAAI,CAACE,GAAG,CAAE,CAAC,EAAEF,IAAI,CAACC,GAAG,CAAExC,UAAU,GAAG,CAAC,EAAEyB,gBAAiB,CAAE,CAAC;;MAE9E;MACA7B,MAAM,CAACW,OAAO,CAAE,CAAEC,KAAK,EAAEoC,KAAK,KAAM;QACnCpC,KAAK,CAACqC,KAAK,CAACC,kBAAkB,GAAG,KAAK;QAEtC,IAAKF,KAAK,KAAKnB,gBAAgB,EAAG;UACjC;UACAjB,KAAK,CAACuC,SAAS,CAACC,GAAG,CAAE,WAAY,CAAC;UAClCxC,KAAK,CAACqC,KAAK,CAAC1B,OAAO,GAAG,GAAG;UACzBX,KAAK,CAACqC,KAAK,CAACzB,QAAQ,GAAG,MAAM;UAC7BZ,KAAK,CAACqC,KAAK,CAACI,MAAM,GAAG,GAAG;QACzB,CAAC,MAAM,IAAKL,KAAK,KAAKjB,oBAAoB,IAAID,kBAAkB,GAAG,CAAC,EAAG;UACtE;UACA,MAAMV,IAAI,GAAGR,KAAK,CAACE,OAAO,CAACwC,cAAc,IAAI,MAAM;UACnD,MAAMhC,MAAM,GAAGH,mBAAmB,CAAEC,IAAI,EAAEU,kBAAmB,CAAC;UAE9DlB,KAAK,CAACuC,SAAS,CAACC,GAAG,CAAE,WAAY,CAAC;UAClCxC,KAAK,CAACqC,KAAK,CAAC1B,OAAO,GAAGD,MAAM,CAACC,OAAO;UACpCX,KAAK,CAACqC,KAAK,CAACzB,QAAQ,GAAGF,MAAM,CAACE,QAAQ;UACtCZ,KAAK,CAACqC,KAAK,CAACI,MAAM,GAAG,GAAG;QACzB,CAAC,MAAM;UACN;UACAzC,KAAK,CAACuC,SAAS,CAACI,MAAM,CAAE,WAAY,CAAC;UACrC3C,KAAK,CAACqC,KAAK,CAAC1B,OAAO,GAAG,GAAG;UACzBX,KAAK,CAACqC,KAAK,CAACzB,QAAQ,GAAG,gBAAgB;UACvCZ,KAAK,CAACqC,KAAK,CAACI,MAAM,GAAG,GAAG;QACzB;MACD,CAAE,CAAC;MAEHhD,OAAO,GAAG,KAAK;IAChB;IAEA,SAASmD,QAAQA,CAAA,EAAG;MACnB,IAAK,CAAEnD,OAAO,EAAG;QAChBV,MAAM,CAAC8D,qBAAqB,CAAE9B,iBAAkB,CAAC;QACjDtB,OAAO,GAAG,IAAI;MACf;IACD;IAEAV,MAAM,CAAC+D,gBAAgB,CAAE,QAAQ,EAAEF,QAAQ,EAAE;MAAEG,OAAO,EAAE;IAAK,CAAE,CAAC;IAChEhE,MAAM,CAAC+D,gBAAgB,CAAE,QAAQ,EAAE/B,iBAAkB,CAAC;;IAEtD;IACAA,iBAAiB,CAAC,CAAC;IAEnB5B,KAAK,CAAC6D,cAAc,GAAG,YAAY;MAClCjE,MAAM,CAACkE,mBAAmB,CAAE,QAAQ,EAAEL,QAAS,CAAC;MAChD7D,MAAM,CAACkE,mBAAmB,CAAE,QAAQ,EAAElC,iBAAkB,CAAC;IAC1D,CAAC;EACF;EAEA,SAASmC,aAAaA,CAAA,EAAG;IACxB,MAAMC,MAAM,GAAGC,QAAQ,CAAC/D,gBAAgB,CAAE,cAAe,CAAC;IAC1D8D,MAAM,CAACpD,OAAO,CAAEb,eAAgB,CAAC;EAClC;EAEA,IAAKkE,QAAQ,CAACC,UAAU,KAAK,SAAS,EAAG;IACxCD,QAAQ,CAACN,gBAAgB,CAAE,kBAAkB,EAAEI,aAAc,CAAC;EAC/D,CAAC,MAAM;IACNA,aAAa,CAAC,CAAC;EAChB;AACD,CAAC,EAAG,CAAC,C","sources":["webpack://theme-blocks/./src/blocks/reveal/view.js"],"sourcesContent":["/**\n * Reveal Block Frontend JavaScript\n *\n * Scroll behavior:\n * 1. Frame background transitions in (wipe/fade)\n * 2. Background HOLDS while content scrolls through naturally\n * 3. Once content scrolls off, next frame background transitions in\n * 4. Repeat...\n */\n\n( function () {\n\t'use strict';\n\n\tconst prefersReducedMotion = window.matchMedia( '(prefers-reduced-motion: reduce)' ).matches;\n\n\tfunction initRevealBlock( block ) {\n\t\tconst frames = block.querySelectorAll( '.reveal-frame' );\n\t\tconst frameContents = block.querySelectorAll( '.reveal-frame-content' );\n\n\t\tif ( frames.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst frameCount = frames.length;\n\t\tlet ticking = false;\n\n\t\t// Transition speed multipliers (affects how much scroll distance the transition takes)\n\t\tconst speedMultipliers = { slow: 1.5, normal: 1, fast: 0.5 };\n\n\t\t// Get transition scroll distance in pixels for each frame\n\t\tconst transitionDistances = [];\n\t\tframes.forEach( ( frame ) => {\n\t\t\tconst speed = frame.dataset.transitionSpeed || 'normal';\n\t\t\tconst multiplier = speedMultipliers[ speed ] || 1;\n\t\t\t// Base transition distance is 50vh, modified by speed\n\t\t\ttransitionDistances.push( window.innerHeight * 0.5 * multiplier );\n\t\t} );\n\n\t\t/**\n\t\t * Get transition styles for the incoming frame.\n\t\t */\n\t\tfunction getTransitionStyles( type, progress ) {\n\t\t\tif ( prefersReducedMotion ) {\n\t\t\t\ttype = 'fade';\n\t\t\t}\n\n\t\t\tlet styles = {\n\t\t\t\topacity: '1',\n\t\t\t\tclipPath: 'inset(0 0 0 0)'\n\t\t\t};\n\n\t\t\tconst clipAmount = ( ( 1 - progress ) * 100 ).toFixed( 2 );\n\n\t\t\tswitch ( type ) {\n\t\t\t\tcase 'fade':\n\t\t\t\t\tstyles.opacity = progress.toFixed( 3 );\n\t\t\t\t\tstyles.clipPath = 'none';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'up':\n\t\t\t\t\tstyles.clipPath = `inset(${ clipAmount }% 0 0 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'down':\n\t\t\t\t\tstyles.clipPath = `inset(0 0 ${ clipAmount }% 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left':\n\t\t\t\t\tstyles.clipPath = `inset(0 0 0 ${ clipAmount }%)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\tstyles.clipPath = `inset(0 ${ clipAmount }% 0 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstyles.opacity = progress >= 0.5 ? '1' : '0';\n\t\t\t\t\tstyles.clipPath = 'none';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t}\n\n\t\tfunction updateActiveFrame() {\n\t\t\tconst viewportHeight = window.innerHeight;\n\n\t\t\t// Determine which frame should be active based on content positions\n\t\t\t// A frame is active when its content is on screen or approaching\n\t\t\t// Transition happens when content has scrolled off and next content is approaching\n\n\t\t\tlet activeFrameIndex = 0;\n\t\t\tlet transitionProgress = 0;\n\t\t\tlet transitioningToIndex = -1;\n\n\t\t\tfor ( let i = 0; i < frameContents.length; i++ ) {\n\t\t\t\tconst content = frameContents[ i ];\n\t\t\t\tconst rect = content.getBoundingClientRect();\n\t\t\t\tconst nextContent = frameContents[ i + 1 ];\n\n\t\t\t\t// Content is considered \"active\" if any part is visible or it's above viewport\n\t\t\t\t// (meaning we've scrolled past it but haven't reached next content yet)\n\t\t\t\t\n\t\t\t\tif ( rect.top < viewportHeight && rect.bottom > 0 ) {\n\t\t\t\t\t// Content is currently visible on screen - this frame is active\n\t\t\t\t\tactiveFrameIndex = i;\n\t\t\t\t\t\n\t\t\t\t\t// Check if we should start transitioning to next frame\n\t\t\t\t\t// Transition starts when this content's bottom is near top of viewport\n\t\t\t\t\tif ( nextContent && rect.bottom < viewportHeight * 0.3 ) {\n\t\t\t\t\t\tconst nextRect = nextContent.getBoundingClientRect();\n\t\t\t\t\t\tconst transitionDistance = transitionDistances[ i + 1 ] || ( viewportHeight * 0.5 );\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Calculate transition progress based on gap between contents\n\t\t\t\t\t\t// Transition happens in the space between current content bottom and next content top\n\t\t\t\t\t\tconst gapStart = rect.bottom;\n\t\t\t\t\t\tconst gapEnd = Math.min( nextRect.top, viewportHeight * 0.5 );\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( gapStart < gapEnd ) {\n\t\t\t\t\t\t\t// We're in the transition zone\n\t\t\t\t\t\t\ttransitionProgress = Math.max( 0, Math.min( 1, \n\t\t\t\t\t\t\t\t( viewportHeight * 0.3 - rect.bottom ) / transitionDistance \n\t\t\t\t\t\t\t) );\n\t\t\t\t\t\t\ttransitioningToIndex = i + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t} else if ( rect.bottom <= 0 ) {\n\t\t\t\t\t// Content has scrolled completely off the top - move to next frame\n\t\t\t\t\tactiveFrameIndex = i + 1;\n\t\t\t\t} else if ( rect.top >= viewportHeight ) {\n\t\t\t\t\t// Content hasn't entered viewport yet - stay on previous frame\n\t\t\t\t\tactiveFrameIndex = Math.max( 0, i - 1 );\n\t\t\t\t\t\n\t\t\t\t\t// But check if we should be transitioning TO this frame\n\t\t\t\t\tif ( i > 0 ) {\n\t\t\t\t\t\tconst prevContent = frameContents[ i - 1 ];\n\t\t\t\t\t\tconst prevRect = prevContent.getBoundingClientRect();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( prevRect.bottom < viewportHeight * 0.3 ) {\n\t\t\t\t\t\t\tconst transitionDistance = transitionDistances[ i ] || ( viewportHeight * 0.5 );\n\t\t\t\t\t\t\ttransitionProgress = Math.max( 0, Math.min( 1,\n\t\t\t\t\t\t\t\t( viewportHeight * 0.3 - prevRect.bottom ) / transitionDistance\n\t\t\t\t\t\t\t) );\n\t\t\t\t\t\t\ttransitioningToIndex = i;\n\t\t\t\t\t\t\tactiveFrameIndex = i - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Clamp to valid range\n\t\t\tactiveFrameIndex = Math.max( 0, Math.min( frameCount - 1, activeFrameIndex ) );\n\n\t\t\t// Update background frames\n\t\t\tframes.forEach( ( frame, index ) => {\n\t\t\t\tframe.style.transitionDuration = '0ms';\n\n\t\t\t\tif ( index === activeFrameIndex ) {\n\t\t\t\t\t// Current active frame - fully visible\n\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = 'none';\n\t\t\t\t\tframe.style.zIndex = '1';\n\t\t\t\t} else if ( index === transitioningToIndex && transitionProgress > 0 ) {\n\t\t\t\t\t// Frame transitioning in\n\t\t\t\t\tconst type = frame.dataset.transitionType || 'fade';\n\t\t\t\t\tconst styles = getTransitionStyles( type, transitionProgress );\n\t\t\t\t\t\n\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t\tframe.style.opacity = styles.opacity;\n\t\t\t\t\tframe.style.clipPath = styles.clipPath;\n\t\t\t\t\tframe.style.zIndex = '2';\n\t\t\t\t} else {\n\t\t\t\t\t// Inactive frames\n\t\t\t\t\tframe.classList.remove( 'is-active' );\n\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\tframe.style.clipPath = 'inset(0 0 0 0)';\n\t\t\t\t\tframe.style.zIndex = '0';\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tticking = false;\n\t\t}\n\n\t\tfunction onScroll() {\n\t\t\tif ( ! ticking ) {\n\t\t\t\twindow.requestAnimationFrame( updateActiveFrame );\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener( 'scroll', onScroll, { passive: true } );\n\t\twindow.addEventListener( 'resize', updateActiveFrame );\n\n\t\t// Initial update\n\t\tupdateActiveFrame();\n\n\t\tblock._revealCleanup = function () {\n\t\t\twindow.removeEventListener( 'scroll', onScroll );\n\t\t\twindow.removeEventListener( 'resize', updateActiveFrame );\n\t\t};\n\t}\n\n\tfunction initAllBlocks() {\n\t\tconst blocks = document.querySelectorAll( '.caes-reveal' );\n\t\tblocks.forEach( initRevealBlock );\n\t}\n\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initAllBlocks );\n\t} else {\n\t\tinitAllBlocks();\n\t}\n} )();"],"names":["prefersReducedMotion","window","matchMedia","matches","initRevealBlock","block","frames","querySelectorAll","frameContents","length","frameCount","ticking","speedMultipliers","slow","normal","fast","transitionDistances","forEach","frame","speed","dataset","transitionSpeed","multiplier","push","innerHeight","getTransitionStyles","type","progress","styles","opacity","clipPath","clipAmount","toFixed","updateActiveFrame","viewportHeight","activeFrameIndex","transitionProgress","transitioningToIndex","i","content","rect","getBoundingClientRect","nextContent","top","bottom","nextRect","transitionDistance","gapStart","gapEnd","Math","min","max","prevContent","prevRect","index","style","transitionDuration","classList","add","zIndex","transitionType","remove","onScroll","requestAnimationFrame","addEventListener","passive","_revealCleanup","removeEventListener","initAllBlocks","blocks","document","readyState"],"sourceRoot":""}