{"version":3,"file":"blocks/reveal/view.js","mappings":"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","sources":["webpack://theme-blocks/./src/blocks/reveal/view.js"],"sourcesContent":["/**\n * Reveal Block Frontend JavaScript\n * \n * Mimics Shorthand's reveal behavior:\n * 1. Frame 1 background visible, content fades in\n * 2. Content fades out as you scroll\n * 3. Frame 2 background transitions in (wipe/fade)\n * 4. Frame 2 content fades in\n * 5. Repeat...\n */\n\n( function () {\n\t'use strict';\n\n\tconst prefersReducedMotion = window.matchMedia( '(prefers-reduced-motion: reduce)' ).matches;\n\n\tfunction initRevealBlock( block ) {\n\t\tconst frames = block.querySelectorAll( '.reveal-frame' );\n\t\tconst frameContents = block.querySelectorAll( '.reveal-frame-content' );\n\n\t\tif ( frames.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst frameCount = frames.length;\n\t\tlet ticking = false;\n\n\t\t// Parse transition data from frames\n\t\t// Each frame (except first) has a transition type and speed\n\t\tconst transitions = [];\n\t\tframes.forEach( ( frame, index ) => {\n\t\t\ttransitions.push( {\n\t\t\t\ttype: frame.dataset.transitionType || 'fade',\n\t\t\t\tspeed: frame.dataset.transitionSpeed || 'normal'\n\t\t\t} );\n\t\t} );\n\n\t\t// Speed affects what portion of scroll the transition takes\n\t\t// Shorthand uses ~0.35 (35%) for transitions\n\t\tconst speedMultipliers = { slow: 0.4, normal: 0.25, fast: 0.15 };\n\n\t\t/**\n\t\t * Get clip-path style for wipe transitions\n\t\t */\n\t\tfunction getTransitionStyles( type, progress ) {\n\t\t\tif ( prefersReducedMotion ) {\n\t\t\t\ttype = 'fade';\n\t\t\t}\n\n\t\t\tconst clipAmount = ( ( 1 - progress ) * 100 ).toFixed( 2 );\n\n\t\t\tswitch ( type ) {\n\t\t\t\tcase 'fade':\n\t\t\t\t\treturn { opacity: progress, clipPath: 'none' };\n\t\t\t\tcase 'up':\n\t\t\t\t\treturn { opacity: 1, clipPath: `inset(${ clipAmount }% 0 0 0)` };\n\t\t\t\tcase 'down':\n\t\t\t\t\treturn { opacity: 1, clipPath: `inset(0 0 ${ clipAmount }% 0)` };\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn { opacity: 1, clipPath: `inset(0 0 0 ${ clipAmount }%)` };\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn { opacity: 1, clipPath: `inset(0 ${ clipAmount }% 0 0)` };\n\t\t\t\tdefault:\n\t\t\t\t\treturn { opacity: progress >= 0.5 ? 1 : 0, clipPath: 'none' };\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Main scroll handler\n\t\t */\n\t\tfunction updateOnScroll() {\n\t\t\tconst blockRect = block.getBoundingClientRect();\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\tconst blockHeight = block.offsetHeight;\n\n\t\t\t// Calculate scroll progress through the block (0 to 1)\n\t\t\tconst scrollableDistance = blockHeight - viewportHeight;\n\t\t\tconst scrolledDistance = Math.max( 0, -blockRect.top );\n\t\t\tconst scrollProgress = scrollableDistance > 0 \n\t\t\t\t? Math.min( 1, scrolledDistance / scrollableDistance ) \n\t\t\t\t: 0;\n\n\t\t\t// Divide scroll into segments for each frame\n\t\t\t// Each segment: [content fade in] [content visible] [content fade out] [bg transition]\n\t\t\tconst segmentSize = 1 / frameCount;\n\n\t\t\t// For each frame, calculate its state\n\t\t\tframes.forEach( ( frame, index ) => {\n\t\t\t\tconst segmentStart = index * segmentSize;\n\t\t\t\tconst segmentEnd = ( index + 1 ) * segmentSize;\n\t\t\t\tconst transitionSize = speedMultipliers[ transitions[ index ].speed ] || 0.25;\n\t\t\t\t\n\t\t\t\t// Within this frame's segment:\n\t\t\t\t// - First 15%: content fades in\n\t\t\t\t// - Middle: content fully visible\n\t\t\t\t// - Last transitionSize%: content fades out + next bg transitions in\n\t\t\t\tconst contentFadeInEnd = segmentStart + ( segmentSize * 0.15 );\n\t\t\t\tconst contentFadeOutStart = segmentEnd - ( segmentSize * transitionSize );\n\t\t\t\tconst bgTransitionStart = contentFadeOutStart;\n\n\t\t\t\tframe.style.transitionDuration = '0ms';\n\n\t\t\t\t// Determine background visibility\n\t\t\t\tif ( scrollProgress < segmentStart ) {\n\t\t\t\t\t// Before this frame's segment - hidden\n\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\tframe.style.clipPath = 'inset(0 0 0 0)';\n\t\t\t\t\tframe.style.zIndex = '0';\n\t\t\t\t\tframe.style.display = 'none';\n\t\t\t\t} else if ( scrollProgress >= segmentStart && scrollProgress < bgTransitionStart ) {\n\t\t\t\t\t// In this frame's content phase - fully visible\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = 'none';\n\t\t\t\t\tframe.style.zIndex = '1';\n\t\t\t\t\tframe.style.display = 'block';\n\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t} else if ( scrollProgress >= bgTransitionStart && scrollProgress < segmentEnd && index < frameCount - 1 ) {\n\t\t\t\t\t// Transitioning out (next frame transitioning in)\n\t\t\t\t\t// This frame stays visible as base\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = 'none';\n\t\t\t\t\tframe.style.zIndex = '1';\n\t\t\t\t\tframe.style.display = 'block';\n\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t} else if ( scrollProgress >= segmentEnd ) {\n\t\t\t\t\t// After this frame's segment\n\t\t\t\t\tif ( index === frameCount - 1 ) {\n\t\t\t\t\t\t// Last frame stays visible\n\t\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\t\tframe.style.clipPath = 'none';\n\t\t\t\t\t\tframe.style.zIndex = '1';\n\t\t\t\t\t\tframe.style.display = 'block';\n\t\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Previous frames get hidden\n\t\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\t\tframe.style.display = 'none';\n\t\t\t\t\t\tframe.style.zIndex = '0';\n\t\t\t\t\t\tframe.classList.remove( 'is-active' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Handle incoming transition for frames after first\n\t\t\t\tif ( index > 0 ) {\n\t\t\t\t\tconst prevSegmentEnd = index * segmentSize;\n\t\t\t\t\tconst prevTransitionSize = speedMultipliers[ transitions[ index ].speed ] || 0.25;\n\t\t\t\t\tconst prevBgTransitionStart = prevSegmentEnd - ( segmentSize * prevTransitionSize );\n\n\t\t\t\t\tif ( scrollProgress >= prevBgTransitionStart && scrollProgress < prevSegmentEnd ) {\n\t\t\t\t\t\t// This frame is transitioning in\n\t\t\t\t\t\tconst transitionProgress = ( scrollProgress - prevBgTransitionStart ) / ( prevSegmentEnd - prevBgTransitionStart );\n\t\t\t\t\t\tconst styles = getTransitionStyles( transitions[ index ].type, transitionProgress );\n\t\t\t\t\t\t\n\t\t\t\t\t\tframe.style.opacity = styles.opacity;\n\t\t\t\t\t\tframe.style.clipPath = styles.clipPath;\n\t\t\t\t\t\tframe.style.zIndex = '2';\n\t\t\t\t\t\tframe.style.display = 'block';\n\t\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Handle content opacity\n\t\t\tframeContents.forEach( ( content, index ) => {\n\t\t\t\tconst segmentStart = index * segmentSize;\n\t\t\t\tconst segmentEnd = ( index + 1 ) * segmentSize;\n\t\t\t\tconst transitionSize = speedMultipliers[ transitions[ index ]?.speed ] || 0.25;\n\t\t\t\t\n\t\t\t\tconst contentFadeInStart = segmentStart;\n\t\t\t\tconst contentFadeInEnd = segmentStart + ( segmentSize * 0.15 );\n\t\t\t\tconst contentFadeOutStart = segmentEnd - ( segmentSize * transitionSize );\n\t\t\t\tconst contentFadeOutEnd = segmentEnd;\n\n\t\t\t\tlet opacity = 0;\n\n\t\t\t\tif ( scrollProgress < contentFadeInStart ) {\n\t\t\t\t\topacity = 0;\n\t\t\t\t} else if ( scrollProgress >= contentFadeInStart && scrollProgress < contentFadeInEnd ) {\n\t\t\t\t\t// Fading in\n\t\t\t\t\topacity = ( scrollProgress - contentFadeInStart ) / ( contentFadeInEnd - contentFadeInStart );\n\t\t\t\t} else if ( scrollProgress >= contentFadeInEnd && scrollProgress < contentFadeOutStart ) {\n\t\t\t\t\t// Fully visible\n\t\t\t\t\topacity = 1;\n\t\t\t\t} else if ( scrollProgress >= contentFadeOutStart && scrollProgress < contentFadeOutEnd ) {\n\t\t\t\t\t// Fading out\n\t\t\t\t\topacity = 1 - ( ( scrollProgress - contentFadeOutStart ) / ( contentFadeOutEnd - contentFadeOutStart ) );\n\t\t\t\t} else {\n\t\t\t\t\topacity = 0;\n\t\t\t\t}\n\n\t\t\t\t// Last frame content stays visible at end\n\t\t\t\tif ( index === frameCount - 1 && scrollProgress >= contentFadeInEnd ) {\n\t\t\t\t\topacity = 1;\n\t\t\t\t}\n\n\t\t\t\tcontent.style.opacity = opacity;\n\t\t\t\tcontent.style.pointerEvents = opacity > 0.5 ? 'auto' : 'none';\n\t\t\t} );\n\n\t\t\tticking = false;\n\t\t}\n\n\t\tfunction onScroll() {\n\t\t\tif ( ! ticking ) {\n\t\t\t\twindow.requestAnimationFrame( updateOnScroll );\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\t// Initialize\n\t\tframeContents.forEach( ( content ) => {\n\t\t\tcontent.style.transition = 'none';\n\t\t\tcontent.style.opacity = '0';\n\t\t} );\n\n\t\t// First frame starts visible\n\t\tif ( frames[ 0 ] ) {\n\t\t\tframes[ 0 ].style.opacity = '1';\n\t\t\tframes[ 0 ].style.clipPath = 'none';\n\t\t\tframes[ 0 ].style.display = 'block';\n\t\t\tframes[ 0 ].classList.add( 'is-active' );\n\t\t}\n\n\t\twindow.addEventListener( 'scroll', onScroll, { passive: true } );\n\t\twindow.addEventListener( 'resize', updateOnScroll );\n\t\tupdateOnScroll();\n\n\t\tblock._revealCleanup = function () {\n\t\t\twindow.removeEventListener( 'scroll', onScroll );\n\t\t\twindow.removeEventListener( 'resize', updateOnScroll );\n\t\t};\n\t}\n\n\tfunction initAllBlocks() {\n\t\tdocument.querySelectorAll( '.caes-reveal' ).forEach( initRevealBlock );\n\t}\n\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initAllBlocks );\n\t} else {\n\t\tinitAllBlocks();\n\t}\n} )();"],"names":["prefersReducedMotion","window","matchMedia","matches","initRevealBlock","block","frames","querySelectorAll","frameContents","length","frameCount","ticking","transitions","forEach","frame","index","push","type","dataset","transitionType","speed","transitionSpeed","speedMultipliers","slow","normal","fast","getTransitionStyles","progress","clipAmount","toFixed","opacity","clipPath","updateOnScroll","blockRect","getBoundingClientRect","viewportHeight","innerHeight","blockHeight","offsetHeight","scrollableDistance","scrolledDistance","Math","max","top","scrollProgress","min","segmentSize","segmentStart","segmentEnd","transitionSize","contentFadeInEnd","contentFadeOutStart","bgTransitionStart","style","transitionDuration","zIndex","display","classList","add","remove","prevSegmentEnd","prevTransitionSize","prevBgTransitionStart","transitionProgress","styles","content","contentFadeInStart","contentFadeOutEnd","pointerEvents","onScroll","requestAnimationFrame","transition","addEventListener","passive","_revealCleanup","removeEventListener","initAllBlocks","document","readyState"],"sourceRoot":""}