{"version":3,"file":"blocks/reveal/view.js","mappings":"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","sources":["webpack://theme-blocks/./src/blocks/reveal/view.js"],"sourcesContent":["/**\n * Reveal Block Frontend JavaScript\n *\n * Each frame has two scroll phases:\n * 1. HOLD - Background stays while content is visible (content scrolls naturally)\n * 2. TRANSITION - Background transitions to next frame\n *\n * The transition only happens AFTER the content has scrolled off.\n */\n\n( function () {\n\t'use strict';\n\n\tconst prefersReducedMotion = window.matchMedia( '(prefers-reduced-motion: reduce)' ).matches;\n\n\tfunction initRevealBlock( block ) {\n\t\tconst frames = block.querySelectorAll( '.reveal-frame' );\n\t\tconst frameContents = block.querySelectorAll( '.reveal-frame-content' );\n\n\t\tif ( frames.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst frameCount = frames.length;\n\t\tlet ticking = false;\n\t\tlet currentActiveIndex = 0;\n\n\t\t// Speed multipliers affect transition duration\n\t\tconst speedMultipliers = { slow: 1.5, normal: 1, fast: 0.5 };\n\n\t\t/**\n\t\t * Get transition styles for the incoming frame.\n\t\t */\n\t\tfunction getTransitionStyles( type, progress ) {\n\t\t\tif ( prefersReducedMotion ) {\n\t\t\t\ttype = 'fade';\n\t\t\t}\n\n\t\t\tlet styles = {\n\t\t\t\topacity: '1',\n\t\t\t\tclipPath: 'inset(0 0 0 0)'\n\t\t\t};\n\n\t\t\tconst clipAmount = ( ( 1 - progress ) * 100 ).toFixed( 2 );\n\n\t\t\tswitch ( type ) {\n\t\t\t\tcase 'fade':\n\t\t\t\t\tstyles.opacity = progress.toFixed( 3 );\n\t\t\t\t\tstyles.clipPath = 'none';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'up':\n\t\t\t\t\tstyles.clipPath = `inset(${ clipAmount }% 0 0 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'down':\n\t\t\t\t\tstyles.clipPath = `inset(0 0 ${ clipAmount }% 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'left':\n\t\t\t\t\tstyles.clipPath = `inset(0 0 0 ${ clipAmount }%)`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\tstyles.clipPath = `inset(0 ${ clipAmount }% 0 0)`;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstyles.opacity = progress >= 0.5 ? '1' : '0';\n\t\t\t\t\tstyles.clipPath = 'none';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t}\n\n\t\t/**\n\t\t * Update frame content visibility\n\t\t */\n\t\tfunction updateFrameContentVisibility( targetIndex ) {\n\t\t\tif ( targetIndex === currentActiveIndex ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tframeContents.forEach( ( content ) => {\n\t\t\t\tconst contentIndex = parseInt( content.dataset.frameIndex, 10 );\n\n\t\t\t\tif ( contentIndex === targetIndex ) {\n\t\t\t\t\tcontent.style.opacity = '1';\n\t\t\t\t\tcontent.style.pointerEvents = 'auto';\n\t\t\t\t\tcontent.setAttribute( 'aria-hidden', 'false' );\n\t\t\t\t} else {\n\t\t\t\t\tcontent.style.opacity = '0';\n\t\t\t\t\tcontent.style.pointerEvents = 'none';\n\t\t\t\t\tcontent.setAttribute( 'aria-hidden', 'true' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tcurrentActiveIndex = targetIndex;\n\t\t}\n\n\t\t/**\n\t\t * Main update function - determines active frame and transition progress\n\t\t * \n\t\t * Sequence for each frame:\n\t\t * 1. Previous content scrolls off top\n\t\t * 2. Background transitions to new frame (in the gap)\n\t\t * 3. New content scrolls in from bottom\n\t\t * 4. Repeat\n\t\t */\n\t\tfunction updateActiveFrame() {\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\t\n\t\t\tlet activeFrameIndex = 0;\n\t\t\tlet transitionProgress = 0;\n\t\t\tlet nextFrameIndex = -1;\n\n\t\t\t// Loop through content blocks to find which one is \"active\"\n\t\t\tfor ( let i = 0; i < frameContents.length; i++ ) {\n\t\t\t\tconst content = frameContents[ i ];\n\t\t\t\tconst rect = content.getBoundingClientRect();\n\t\t\t\t\n\t\t\t\t// Get the transition zone height for transitioning TO this frame\n\t\t\t\tconst thisFrame = frames[ i ];\n\t\t\t\tconst transitionSpeed = thisFrame ? ( thisFrame.dataset.transitionSpeed || 'normal' ) : 'normal';\n\t\t\t\tconst transitionMultiplier = speedMultipliers[ transitionSpeed ] || 1;\n\t\t\t\tconst transitionZoneHeight = viewportHeight * 0.6 * transitionMultiplier;\n\n\t\t\t\t// Check if this content's top has entered the viewport\n\t\t\t\tconst contentTopEntered = rect.top < viewportHeight;\n\t\t\t\t\n\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t// First frame - always active until its content leaves\n\t\t\t\t\tif ( rect.bottom > 0 ) {\n\t\t\t\t\t\tactiveFrameIndex = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t// First content has left, check for transition to frame 2\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// For frames 2+:\n\t\t\t\t// The transition should happen BEFORE content enters\n\t\t\t\t// Transition zone is above this content (between prev content and this one)\n\t\t\t\t\n\t\t\t\tconst prevContent = frameContents[ i - 1 ];\n\t\t\t\tconst prevRect = prevContent.getBoundingClientRect();\n\t\t\t\t\n\t\t\t\t// Previous content has scrolled off top\n\t\t\t\tif ( prevRect.bottom <= 0 ) {\n\t\t\t\t\t// We're either transitioning or fully on this frame\n\t\t\t\t\t\n\t\t\t\t\t// Calculate how far into the transition zone we are\n\t\t\t\t\t// Transition starts when prev content bottom hits 0\n\t\t\t\t\t// Transition ends when this content top reaches a threshold (e.g., 80% down viewport)\n\t\t\t\t\tconst transitionEndPoint = viewportHeight * 0.8;\n\t\t\t\t\t\n\t\t\t\t\tif ( rect.top > transitionEndPoint ) {\n\t\t\t\t\t\t// Still transitioning - prev content gone, this content not yet visible\n\t\t\t\t\t\t// Progress based on how close this content's top is to the end point\n\t\t\t\t\t\tconst distanceToEnd = rect.top - transitionEndPoint;\n\t\t\t\t\t\ttransitionProgress = Math.max( 0, Math.min( 1, 1 - ( distanceToEnd / transitionZoneHeight ) ) );\n\t\t\t\t\t\tactiveFrameIndex = i - 1;\n\t\t\t\t\t\tnextFrameIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Transition complete, this frame is now active\n\t\t\t\t\t\tactiveFrameIndex = i;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Check if THIS content is leaving and we need to transition to next\n\t\t\t\t\t\tif ( rect.bottom <= 0 && i < frameContents.length - 1 ) {\n\t\t\t\t\t\t\t// This content has left, start next transition\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Previous content still visible, stay on previous frame\n\t\t\t\t\tactiveFrameIndex = i - 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Handle scrolling past all content\n\t\t\tconst lastContent = frameContents[ frameContents.length - 1 ];\n\t\t\tif ( lastContent ) {\n\t\t\t\tconst lastRect = lastContent.getBoundingClientRect();\n\t\t\t\tif ( lastRect.bottom <= 0 ) {\n\t\t\t\t\tactiveFrameIndex = frameCount - 1;\n\t\t\t\t\ttransitionProgress = 0;\n\t\t\t\t\tnextFrameIndex = -1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Clamp to valid range\n\t\t\tactiveFrameIndex = Math.max( 0, Math.min( frameCount - 1, activeFrameIndex ) );\n\n\t\t\t// Update background frames\n\t\t\tframes.forEach( ( frame, index ) => {\n\t\t\t\tframe.style.transitionDuration = '0ms';\n\n\t\t\t\tif ( index === activeFrameIndex ) {\n\t\t\t\t\t// Active frame - fully visible\n\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.clipPath = 'none';\n\t\t\t\t\tframe.style.zIndex = '1';\n\t\t\t\t} else if ( index === nextFrameIndex && transitionProgress > 0 ) {\n\t\t\t\t\t// Next frame - transitioning in\n\t\t\t\t\tconst type = frame.dataset.transitionType || 'fade';\n\t\t\t\t\tconst styles = getTransitionStyles( type, transitionProgress );\n\n\t\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\t\tframe.style.opacity = styles.opacity;\n\t\t\t\t\tframe.style.clipPath = styles.clipPath;\n\t\t\t\t\tframe.style.zIndex = '2';\n\t\t\t\t} else {\n\t\t\t\t\t// Inactive frames\n\t\t\t\t\tframe.classList.remove( 'is-active' );\n\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\tframe.style.clipPath = 'inset(0 0 0 0)';\n\t\t\t\t\tframe.style.zIndex = '0';\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Content visibility: show content only when its frame is fully active (not transitioning)\n\t\t\tlet visibleContentIndex = activeFrameIndex;\n\t\t\tif ( nextFrameIndex >= 0 && transitionProgress >= 1 ) {\n\t\t\t\tvisibleContentIndex = nextFrameIndex;\n\t\t\t}\n\t\t\tupdateFrameContentVisibility( visibleContentIndex );\n\n\t\t\tticking = false;\n\t\t}\n\n\t\tfunction onScroll() {\n\t\t\tif ( ! ticking ) {\n\t\t\t\twindow.requestAnimationFrame( updateActiveFrame );\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\t// Initialize content visibility\n\t\tframeContents.forEach( ( content, index ) => {\n\t\t\tcontent.style.transition = 'opacity 0.3s ease';\n\t\t\tif ( index === 0 ) {\n\t\t\t\tcontent.style.opacity = '1';\n\t\t\t\tcontent.style.pointerEvents = 'auto';\n\t\t\t\tcontent.setAttribute( 'aria-hidden', 'false' );\n\t\t\t} else {\n\t\t\t\tcontent.style.opacity = '0';\n\t\t\t\tcontent.style.pointerEvents = 'none';\n\t\t\t\tcontent.setAttribute( 'aria-hidden', 'true' );\n\t\t\t}\n\t\t} );\n\n\t\twindow.addEventListener( 'scroll', onScroll, { passive: true } );\n\t\twindow.addEventListener( 'resize', updateActiveFrame );\n\n\t\t// Initial update\n\t\tupdateActiveFrame();\n\n\t\tblock._revealCleanup = function () {\n\t\t\twindow.removeEventListener( 'scroll', onScroll );\n\t\t\twindow.removeEventListener( 'resize', updateActiveFrame );\n\t\t};\n\t}\n\n\tfunction initAllBlocks() {\n\t\tconst blocks = document.querySelectorAll( '.caes-reveal' );\n\t\tblocks.forEach( initRevealBlock );\n\t}\n\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initAllBlocks );\n\t} else {\n\t\tinitAllBlocks();\n\t}\n} )();"],"names":["prefersReducedMotion","window","matchMedia","matches","initRevealBlock","block","frames","querySelectorAll","frameContents","length","frameCount","ticking","currentActiveIndex","speedMultipliers","slow","normal","fast","getTransitionStyles","type","progress","styles","opacity","clipPath","clipAmount","toFixed","updateFrameContentVisibility","targetIndex","forEach","content","contentIndex","parseInt","dataset","frameIndex","style","pointerEvents","setAttribute","updateActiveFrame","viewportHeight","innerHeight","activeFrameIndex","transitionProgress","nextFrameIndex","i","rect","getBoundingClientRect","thisFrame","transitionSpeed","transitionMultiplier","transitionZoneHeight","contentTopEntered","top","bottom","prevContent","prevRect","transitionEndPoint","distanceToEnd","Math","max","min","lastContent","lastRect","frame","index","transitionDuration","classList","add","zIndex","transitionType","remove","visibleContentIndex","onScroll","requestAnimationFrame","transition","addEventListener","passive","_revealCleanup","removeEventListener","initAllBlocks","blocks","document","readyState"],"sourceRoot":""}