{"version":3,"file":"blocks/reveal/view.js","mappings":"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","sources":["webpack://theme-blocks/./src/blocks/reveal/view.js"],"sourcesContent":["/**\n * Reveal Block Frontend JavaScript\n *\n * Handles scroll-triggered frame transitions.\n * The CSS uses clip-path to handle the visual \"window\" effect,\n * so JS only needs to manage frame transitions based on scroll position.\n */\n\n( function () {\n\t'use strict';\n\n\t// Check reduced motion preference\n\tconst prefersReducedMotion = window.matchMedia( '(prefers-reduced-motion: reduce)' ).matches;\n\n\t/**\n\t * Initialize a single Reveal block\n\t *\n\t * @param {HTMLElement} block The reveal block element\n\t */\n\tfunction initRevealBlock( block ) {\n\t\tconst frames = block.querySelectorAll( '.reveal-frame' );\n\n\t\tif ( frames.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst frameCount = frames.length;\n\t\tlet currentFrameIndex = 0;\n\t\tlet ticking = false;\n\n\t\t/**\n\t\t * Get the exit transform for a direction (rewind - go back to where it entered from)\n\t\t */\n\t\tfunction getExitTransform( direction ) {\n\t\t\tswitch ( direction ) {\n\t\t\t\tcase 'up':\n\t\t\t\t\treturn 'translateY(100%)'; // Came from bottom, go back to bottom\n\t\t\t\tcase 'down':\n\t\t\t\t\treturn 'translateY(-100%)'; // Came from top, go back to top\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn 'translateX(100%)'; // Came from right, go back to right\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn 'translateX(-100%)'; // Came from left, go back to left\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Get the enter transform for a direction\n\t\t */\n\t\tfunction getEnterTransform( direction ) {\n\t\t\tswitch ( direction ) {\n\t\t\t\tcase 'up':\n\t\t\t\t\treturn 'translateY(100%)'; // Enter from bottom\n\t\t\t\tcase 'down':\n\t\t\t\t\treturn 'translateY(-100%)'; // Enter from top\n\t\t\t\tcase 'left':\n\t\t\t\t\treturn 'translateX(100%)'; // Enter from right\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn 'translateX(-100%)'; // Enter from left\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Apply forward transition (scrolling down) - new frame slides in over old frame\n\t\t */\n\t\tfunction applyForwardTransition( newFrame, oldFrame ) {\n\t\t\tconst transitionType = newFrame.dataset.transitionType || 'fade';\n\t\t\tconst transitionSpeed = parseInt( newFrame.dataset.transitionSpeed, 10 ) || 500;\n\t\t\tconst duration = prefersReducedMotion ? 0 : transitionSpeed;\n\t\t\tconst isDirectional = [ 'up', 'down', 'left', 'right' ].includes( transitionType );\n\t\t\tconst initialTransform = getEnterTransform( transitionType );\n\n\t\t\tif ( isDirectional && initialTransform && ! prefersReducedMotion ) {\n\t\t\t\t// Keep old frame visible underneath\n\t\t\t\tif ( oldFrame ) {\n\t\t\t\t\toldFrame.style.zIndex = '1';\n\t\t\t\t\toldFrame.style.opacity = '1';\n\t\t\t\t}\n\n\t\t\t\t// Position new frame off-screen\n\t\t\t\tnewFrame.style.transitionDuration = '0ms';\n\t\t\t\tnewFrame.style.transform = initialTransform;\n\t\t\t\tnewFrame.style.opacity = '1';\n\t\t\t\tnewFrame.style.zIndex = '2';\n\t\t\t\tnewFrame.offsetHeight; // Force reflow\n\n\t\t\t\t// Animate new frame in\n\t\t\t\tnewFrame.style.transitionDuration = `${ duration }ms`;\n\t\t\t\tnewFrame.classList.add( 'is-active' );\n\t\t\t\tnewFrame.style.transform = 'translate(0, 0)';\n\n\t\t\t\t// Clean up old frame after animation\n\t\t\t\tif ( oldFrame ) {\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\toldFrame.classList.remove( 'is-active' );\n\t\t\t\t\t\toldFrame.style.opacity = '0';\n\t\t\t\t\t\toldFrame.style.zIndex = '';\n\t\t\t\t\t\tnewFrame.style.zIndex = '';\n\t\t\t\t\t}, duration );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Fade transition\n\t\t\t\tnewFrame.style.transitionDuration = `${ duration }ms`;\n\t\t\t\tnewFrame.classList.add( 'is-active' );\n\t\t\t\tnewFrame.style.opacity = '1';\n\t\t\t\tnewFrame.style.transform = 'translate(0, 0)';\n\n\t\t\t\tif ( oldFrame ) {\n\t\t\t\t\toldFrame.style.transitionDuration = `${ duration }ms`;\n\t\t\t\t\toldFrame.classList.remove( 'is-active' );\n\t\t\t\t\toldFrame.style.opacity = '0';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Apply reverse transition (scrolling up) - old frame slides out, revealing new frame underneath\n\t\t */\n\t\tfunction applyReverseTransition( newFrame, oldFrame ) {\n\t\t\tconst transitionType = oldFrame?.dataset.transitionType || 'fade';\n\t\t\tconst transitionSpeed = parseInt( oldFrame?.dataset.transitionSpeed, 10 ) || 500;\n\t\t\tconst duration = prefersReducedMotion ? 0 : transitionSpeed;\n\t\t\tconst isDirectional = [ 'up', 'down', 'left', 'right' ].includes( transitionType );\n\t\t\tconst exitTransform = getExitTransform( transitionType );\n\n\t\t\tif ( isDirectional && exitTransform && oldFrame && ! prefersReducedMotion ) {\n\t\t\t\t// Make new frame visible underneath immediately\n\t\t\t\tnewFrame.style.transitionDuration = '0ms';\n\t\t\t\tnewFrame.style.transform = 'translate(0, 0)';\n\t\t\t\tnewFrame.style.opacity = '1';\n\t\t\t\tnewFrame.style.zIndex = '1';\n\t\t\t\tnewFrame.classList.add( 'is-active' );\n\t\t\t\tnewFrame.offsetHeight; // Force reflow\n\n\t\t\t\t// Old frame slides out\n\t\t\t\toldFrame.style.zIndex = '2';\n\t\t\t\toldFrame.style.transitionDuration = `${ duration }ms`;\n\t\t\t\toldFrame.style.transform = exitTransform;\n\n\t\t\t\t// Clean up after animation\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\toldFrame.classList.remove( 'is-active' );\n\t\t\t\t\toldFrame.style.opacity = '0';\n\t\t\t\t\toldFrame.style.transform = '';\n\t\t\t\t\toldFrame.style.zIndex = '';\n\t\t\t\t\tnewFrame.style.zIndex = '';\n\t\t\t\t}, duration );\n\t\t\t} else {\n\t\t\t\t// Fade transition\n\t\t\t\tnewFrame.style.transitionDuration = `${ duration }ms`;\n\t\t\t\tnewFrame.classList.add( 'is-active' );\n\t\t\t\tnewFrame.style.opacity = '1';\n\t\t\t\tnewFrame.style.transform = 'translate(0, 0)';\n\n\t\t\t\tif ( oldFrame ) {\n\t\t\t\t\toldFrame.style.transitionDuration = `${ duration }ms`;\n\t\t\t\t\toldFrame.classList.remove( 'is-active' );\n\t\t\t\t\toldFrame.style.opacity = '0';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Update active frame based on scroll position\n\t\t */\n\t\tfunction updateActiveFrame() {\n\t\t\tconst blockRect = block.getBoundingClientRect();\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\tconst blockTop = blockRect.top;\n\t\t\tconst blockHeight = block.offsetHeight;\n\n\t\t\t// Calculate scroll progress through the block\n\t\t\t// Progress is 0 when block top is at viewport top\n\t\t\t// Progress is 1 when block bottom is at viewport bottom\n\t\t\tconst scrollableDistance = blockHeight - viewportHeight;\n\t\t\t\n\t\t\tif ( scrollableDistance <= 0 ) {\n\t\t\t\tticking = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// How far we've scrolled into the block (blockTop is negative when scrolled past top)\n\t\t\tconst scrolledDistance = Math.max( 0, -blockTop );\n\t\t\tconst scrollProgress = Math.min( 1, scrolledDistance / scrollableDistance );\n\n\t\t\t// Determine which frame should be active\n\t\t\tconst newFrameIndex = Math.min(\n\t\t\t\tframeCount - 1,\n\t\t\t\tMath.floor( scrollProgress * frameCount )\n\t\t\t);\n\n\t\t\t// Update frames if index changed\n\t\t\tif ( newFrameIndex !== currentFrameIndex ) {\n\t\t\t\tconst oldFrame = frames[ currentFrameIndex ];\n\t\t\t\tconst newFrame = frames[ newFrameIndex ];\n\t\t\t\tconst isScrollingDown = newFrameIndex > currentFrameIndex;\n\t\t\t\t\n\t\t\t\t// Hide any frames that aren't involved in the transition\n\t\t\t\tframes.forEach( ( frame, index ) => {\n\t\t\t\t\tif ( index !== newFrameIndex && index !== currentFrameIndex ) {\n\t\t\t\t\t\tframe.classList.remove( 'is-active' );\n\t\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\t\tframe.style.zIndex = '';\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// Apply appropriate transition based on scroll direction\n\t\t\t\tif ( isScrollingDown ) {\n\t\t\t\t\tapplyForwardTransition( newFrame, oldFrame );\n\t\t\t\t} else {\n\t\t\t\t\tapplyReverseTransition( newFrame, oldFrame );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcurrentFrameIndex = newFrameIndex;\n\t\t\t}\n\n\t\t\tticking = false;\n\t\t}\n\n\t\t/**\n\t\t * Handle scroll events with requestAnimationFrame throttling\n\t\t */\n\t\tfunction onScroll() {\n\t\t\tif ( ! ticking ) {\n\t\t\t\twindow.requestAnimationFrame( updateActiveFrame );\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\t// Add scroll listener\n\t\twindow.addEventListener( 'scroll', onScroll, { passive: true } );\n\n\t\t// Initial state - ensure first frame is visible\n\t\tframes.forEach( ( frame, index ) => {\n\t\t\tif ( index === 0 ) {\n\t\t\t\tframe.classList.add( 'is-active' );\n\t\t\t\tframe.style.opacity = '1';\n\t\t\t} else {\n\t\t\t\tframe.classList.remove( 'is-active' );\n\t\t\t\tframe.style.opacity = '0';\n\t\t\t}\n\t\t} );\n\n\t\t// Initial scroll state check\n\t\tupdateActiveFrame();\n\n\t\t// Store cleanup function on element for potential future use\n\t\tblock._revealCleanup = function () {\n\t\t\twindow.removeEventListener( 'scroll', onScroll );\n\t\t};\n\t}\n\n\t/**\n\t * Initialize all Reveal blocks on the page\n\t */\n\tfunction initAllBlocks() {\n\t\tconst blocks = document.querySelectorAll( '.caes-reveal' );\n\t\tblocks.forEach( initRevealBlock );\n\t}\n\n\t// Initialize on DOM ready\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initAllBlocks );\n\t} else {\n\t\tinitAllBlocks();\n\t}\n} )();"],"names":["prefersReducedMotion","window","matchMedia","matches","initRevealBlock","block","frames","querySelectorAll","length","frameCount","currentFrameIndex","ticking","getExitTransform","direction","getEnterTransform","applyForwardTransition","newFrame","oldFrame","transitionType","dataset","transitionSpeed","parseInt","duration","isDirectional","includes","initialTransform","style","zIndex","opacity","transitionDuration","transform","offsetHeight","classList","add","setTimeout","remove","applyReverseTransition","exitTransform","updateActiveFrame","blockRect","getBoundingClientRect","viewportHeight","innerHeight","blockTop","top","blockHeight","scrollableDistance","scrolledDistance","Math","max","scrollProgress","min","newFrameIndex","floor","isScrollingDown","forEach","frame","index","onScroll","requestAnimationFrame","addEventListener","passive","_revealCleanup","removeEventListener","initAllBlocks","blocks","document","readyState"],"sourceRoot":""}