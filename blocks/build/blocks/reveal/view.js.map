{"version":3,"file":"blocks/reveal/view.js","mappings":"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","sources":["webpack://theme-blocks/./src/blocks/reveal/view.js"],"sourcesContent":["/**\n * Reveal Block Frontend JavaScript - Sticky Approach\n * \n * CSS sticky positioning handles the main behavior:\n * - Background stays pinned while content scrolls through\n * - Background scrolls away naturally when content is done\n * \n * This JS handles:\n * - Content opacity fade (optional smoothing)\n * - Any future transition effects between frames\n */\n\n( function () {\n\t'use strict';\n\n\tfunction initRevealBlock( block ) {\n\t\tconst sections = block.querySelectorAll( '.reveal-frame-section' );\n\t\tconst contents = block.querySelectorAll( '.reveal-frame-content' );\n\n\t\tif ( sections.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet ticking = false;\n\n\t\t/**\n\t\t * Calculate content opacity based on position in viewport\n\t\t * Fades in from bottom, fades out at top\n\t\t */\n\t\tfunction getContentOpacity( element ) {\n\t\t\tconst rect = element.getBoundingClientRect();\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\t\n\t\t\t// Fade zones\n\t\t\tconst fadeInStart = viewportHeight * 0.85;  // Start fading in when top is at 85% down\n\t\t\tconst fadeInEnd = viewportHeight * 0.6;    // Fully visible when top is at 60% down\n\t\t\tconst fadeOutStart = viewportHeight * 0.2; // Start fading out when top is at 20% down\n\t\t\tconst fadeOutEnd = 0;                       // Fully faded when top hits 0\n\t\t\t\n\t\t\tconst elementTop = rect.top;\n\t\t\t\n\t\t\t// Below viewport\n\t\t\tif ( elementTop > viewportHeight ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\t\n\t\t\t// Above viewport\n\t\t\tif ( rect.bottom < 0 ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\t\n\t\t\t// Fading in (entering from bottom)\n\t\t\tif ( elementTop > fadeInEnd ) {\n\t\t\t\tif ( elementTop > fadeInStart ) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\treturn 1 - ( ( elementTop - fadeInEnd ) / ( fadeInStart - fadeInEnd ) );\n\t\t\t}\n\t\t\t\n\t\t\t// Fading out (exiting at top)\n\t\t\tif ( elementTop < fadeOutStart ) {\n\t\t\t\tif ( elementTop < fadeOutEnd ) {\n\t\t\t\t\treturn Math.max( 0, rect.bottom / ( viewportHeight * 0.3 ) );\n\t\t\t\t}\n\t\t\t\treturn elementTop / fadeOutStart;\n\t\t\t}\n\t\t\t\n\t\t\t// Fully visible\n\t\t\treturn 1;\n\t\t}\n\n\t\t/**\n\t\t * Update on scroll\n\t\t */\n\t\tfunction updateOnScroll() {\n\t\t\tcontents.forEach( ( content ) => {\n\t\t\t\tconst opacity = getContentOpacity( content );\n\t\t\t\tcontent.style.opacity = opacity;\n\t\t\t} );\n\n\t\t\tticking = false;\n\t\t}\n\n\t\tfunction onScroll() {\n\t\t\tif ( ! ticking ) {\n\t\t\t\twindow.requestAnimationFrame( updateOnScroll );\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\t// Initialize - start with content visible (CSS handles initial state)\n\t\tcontents.forEach( ( content ) => {\n\t\t\tcontent.style.transition = 'none';\n\t\t} );\n\n\t\t// Set up scroll listener\n\t\twindow.addEventListener( 'scroll', onScroll, { passive: true } );\n\t\twindow.addEventListener( 'resize', updateOnScroll );\n\t\t\n\t\t// Initial update\n\t\tupdateOnScroll();\n\n\t\t// Cleanup\n\t\tblock._revealCleanup = function () {\n\t\t\twindow.removeEventListener( 'scroll', onScroll );\n\t\t\twindow.removeEventListener( 'resize', updateOnScroll );\n\t\t};\n\t}\n\n\tfunction initAllBlocks() {\n\t\tdocument.querySelectorAll( '.caes-reveal' ).forEach( initRevealBlock );\n\t}\n\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initAllBlocks );\n\t} else {\n\t\tinitAllBlocks();\n\t}\n} )();"],"names":["initRevealBlock","block","sections","querySelectorAll","contents","length","ticking","getContentOpacity","element","rect","getBoundingClientRect","viewportHeight","window","innerHeight","fadeInStart","fadeInEnd","fadeOutStart","fadeOutEnd","elementTop","top","bottom","Math","max","updateOnScroll","forEach","content","opacity","style","onScroll","requestAnimationFrame","transition","addEventListener","passive","_revealCleanup","removeEventListener","initAllBlocks","document","readyState"],"sourceRoot":""}