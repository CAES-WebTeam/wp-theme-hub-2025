{"version":3,"file":"blocks/reveal/view.js","mappings":"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","sources":["webpack://theme-blocks/./src/blocks/reveal/view.js"],"sourcesContent":["/**\n * Reveal Block Frontend JavaScript - Sticky Approach v5\n * \n * CSS sticky does the heavy lifting. This JS just:\n * 1. Adds smooth opacity fade to content as it enters/exits\n * 2. (Future: transition effects between frames)\n */\n\n( function () {\n\t'use strict';\n\n\tfunction initRevealBlock( block ) {\n\t\tconst contents = block.querySelectorAll( '.reveal-frame-content' );\n\n\t\tif ( contents.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet ticking = false;\n\n\t\t/**\n\t\t * Calculate content opacity based on its position in viewport\n\t\t */\n\t\tfunction getContentOpacity( element ) {\n\t\t\tconst rect = element.getBoundingClientRect();\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\t\n\t\t\t// Get the actual content inside (not the padding)\n\t\t\tconst contentChildren = element.children;\n\t\t\tif ( contentChildren.length === 0 ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\t\n\t\t\t// Find the bounding box of actual content\n\t\t\tlet contentTop = Infinity;\n\t\t\tlet contentBottom = -Infinity;\n\t\t\t\n\t\t\tfor ( let child of contentChildren ) {\n\t\t\t\tconst childRect = child.getBoundingClientRect();\n\t\t\t\tif ( childRect.top < contentTop ) contentTop = childRect.top;\n\t\t\t\tif ( childRect.bottom > contentBottom ) contentBottom = childRect.bottom;\n\t\t\t}\n\t\t\t\n\t\t\t// If we couldn't find content, use element bounds\n\t\t\tif ( contentTop === Infinity ) {\n\t\t\t\tcontentTop = rect.top;\n\t\t\t\tcontentBottom = rect.bottom;\n\t\t\t}\n\t\t\t\n\t\t\tconst fadeZone = viewportHeight * 0.2; // 20% of viewport for fade\n\t\t\t\n\t\t\t// Content fully below viewport\n\t\t\tif ( contentTop >= viewportHeight ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\t\n\t\t\t// Content fully above viewport  \n\t\t\tif ( contentBottom <= 0 ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\t\n\t\t\t// Fading in from bottom\n\t\t\tif ( contentTop > viewportHeight - fadeZone ) {\n\t\t\t\treturn ( viewportHeight - contentTop ) / fadeZone;\n\t\t\t}\n\t\t\t\n\t\t\t// Fading out at top\n\t\t\tif ( contentBottom < fadeZone ) {\n\t\t\t\treturn contentBottom / fadeZone;\n\t\t\t}\n\t\t\t\n\t\t\t// Fully visible\n\t\t\treturn 1;\n\t\t}\n\n\t\tfunction updateOnScroll() {\n\t\t\tcontents.forEach( ( content ) => {\n\t\t\t\tconst opacity = getContentOpacity( content );\n\t\t\t\tcontent.style.opacity = Math.max( 0, Math.min( 1, opacity ) );\n\t\t\t} );\n\n\t\t\tticking = false;\n\t\t}\n\n\t\tfunction onScroll() {\n\t\t\tif ( ! ticking ) {\n\t\t\t\twindow.requestAnimationFrame( updateOnScroll );\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\t// Initialize\n\t\tcontents.forEach( ( content ) => {\n\t\t\tcontent.style.transition = 'none';\n\t\t} );\n\n\t\twindow.addEventListener( 'scroll', onScroll, { passive: true } );\n\t\twindow.addEventListener( 'resize', updateOnScroll );\n\t\t\n\t\tupdateOnScroll();\n\n\t\tblock._revealCleanup = function () {\n\t\t\twindow.removeEventListener( 'scroll', onScroll );\n\t\t\twindow.removeEventListener( 'resize', updateOnScroll );\n\t\t};\n\t}\n\n\tfunction initAllBlocks() {\n\t\tdocument.querySelectorAll( '.caes-reveal' ).forEach( initRevealBlock );\n\t}\n\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initAllBlocks );\n\t} else {\n\t\tinitAllBlocks();\n\t}\n} )();"],"names":["initRevealBlock","block","contents","querySelectorAll","length","ticking","getContentOpacity","element","rect","getBoundingClientRect","viewportHeight","window","innerHeight","contentChildren","children","contentTop","Infinity","contentBottom","child","childRect","top","bottom","fadeZone","updateOnScroll","forEach","content","opacity","style","Math","max","min","onScroll","requestAnimationFrame","transition","addEventListener","passive","_revealCleanup","removeEventListener","initAllBlocks","document","readyState"],"sourceRoot":""}