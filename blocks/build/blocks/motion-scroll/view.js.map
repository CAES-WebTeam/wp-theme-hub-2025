{"version":3,"file":"blocks/motion-scroll/view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,YAAY;EACZ,YAAY;;EAEZ;AACD;AACA;EACC,SAASA,qBAAqBA,CAACC,KAAK,EAAE;IACrC,MAAMC,cAAc,GAAGD,KAAK,CAACE,aAAa,CAAC,sBAAsB,CAAC;IAClE,MAAMC,MAAM,GAAGH,KAAK,CAACI,gBAAgB,CAAC,sBAAsB,CAAC;IAC7D,MAAMC,gBAAgB,GAAGL,KAAK,CAACE,aAAa,CAAC,wBAAwB,CAAC;IACtE,MAAMI,QAAQ,GAAGN,KAAK,CAACI,gBAAgB,CAAC,wBAAwB,CAAC;IAEjE,IAAI,CAACH,cAAc,IAAIE,MAAM,CAACI,MAAM,KAAK,CAAC,IAAID,QAAQ,CAACC,MAAM,KAAK,CAAC,EAAE;MACpE;IACD;IAEA,IAAIC,OAAO,GAAG,KAAK;IACnB,IAAIC,WAAW,GAAG,EAAE;;IAEpB;AACF;AACA;IACE,SAASC,eAAeA,CAAA,EAAG;MAC1B,MAAMC,cAAc,GAAGC,MAAM,CAACC,WAAW;MACzCJ,WAAW,GAAG,EAAE;MAEhBH,QAAQ,CAACQ,OAAO,CAAC,CAACC,OAAO,EAAEC,KAAK,KAAK;QACpC,MAAMC,IAAI,GAAGF,OAAO,CAACG,qBAAqB,CAAC,CAAC;QAC5C,MAAMC,UAAU,GAAGP,MAAM,CAACQ,WAAW,GAAGH,IAAI,CAACI,GAAG;QAChD,MAAMC,aAAa,GAAGP,OAAO,CAACQ,YAAY;;QAE1C;QACA,MAAMC,KAAK,GAAGrB,MAAM,CAACa,KAAK,CAAC;QAC3B,MAAMS,KAAK,GAAGD,KAAK,GAAIA,KAAK,CAACE,YAAY,CAAC,YAAY,CAAC,IAAI,QAAQ,GAAI,QAAQ;QAE/E,IAAIC,kBAAkB;QACtB,QAAQF,KAAK;UACZ,KAAK,MAAM;YACVE,kBAAkB,GAAGhB,cAAc,GAAG,GAAG;YACzC;UACD,KAAK,MAAM;YACVgB,kBAAkB,GAAGhB,cAAc,GAAG,GAAG;YACzC;UACD;YACCgB,kBAAkB,GAAGhB,cAAc,GAAG,GAAG;QAC3C;QAEAF,WAAW,CAACmB,IAAI,CAAC;UAChBZ,KAAK;UACLD,OAAO;UACPS,KAAK,EAAEA,KAAK;UACZL,UAAU;UACVG,aAAa;UACbO,aAAa,EAAEV,UAAU,GAAGG,aAAa;UACzC;UACAQ,eAAe,EAAEX,UAAU,GAAGR,cAAc;UAC5CoB,aAAa,EAAEZ,UAAU,GAAGR,cAAc,GAAGgB;QAC9C,CAAC,CAAC;MACH,CAAC,CAAC;IACH;;IAEA;AACF;AACA;IACE,SAASK,oBAAoBA,CAACC,SAAS,EAAE;MACxC,MAAMtB,cAAc,GAAGC,MAAM,CAACC,WAAW;MACzC,MAAMqB,cAAc,GAAGD,SAAS,GAAItB,cAAc,GAAG,CAAE;MAEvD,IAAIwB,WAAW,GAAG,CAAC;MACnB,IAAIC,oBAAoB,GAAG,CAAC,CAAC;MAC7B,IAAIC,kBAAkB,GAAG,CAAC;;MAE1B;MACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7B,WAAW,CAACF,MAAM,EAAE+B,CAAC,EAAE,EAAE;QAC5C,MAAMC,IAAI,GAAG9B,WAAW,CAAC6B,CAAC,CAAC;QAC3B,MAAME,aAAa,GAAGD,IAAI,CAACpB,UAAU,GAAIoB,IAAI,CAACjB,aAAa,GAAG,CAAE;;QAEhE;QACA,IAAIY,cAAc,IAAIK,IAAI,CAACpB,UAAU,EAAE;UACtCgB,WAAW,GAAGG,CAAC;QAChB;;QAEA;QACA,IAAIA,CAAC,GAAG,CAAC,IAAIL,SAAS,IAAIxB,WAAW,CAAC6B,CAAC,CAAC,CAACR,eAAe,IAAIG,SAAS,IAAIxB,WAAW,CAAC6B,CAAC,CAAC,CAACP,aAAa,EAAE;UACtGK,oBAAoB,GAAGE,CAAC;UACxB,MAAMG,sBAAsB,GAAGR,SAAS,GAAGxB,WAAW,CAAC6B,CAAC,CAAC,CAACR,eAAe;UACzE,MAAMH,kBAAkB,GAAGlB,WAAW,CAAC6B,CAAC,CAAC,CAACP,aAAa,GAAGtB,WAAW,CAAC6B,CAAC,CAAC,CAACR,eAAe;UACxFO,kBAAkB,GAAGK,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEH,sBAAsB,GAAGd,kBAAkB,CAAC,CAAC;UAC1FQ,WAAW,GAAGG,CAAC,GAAG,CAAC;QACpB;MACD;MAEA,OAAO;QAAEH,WAAW;QAAEC,oBAAoB;QAAEC;MAAmB,CAAC;IACjE;;IAEA;AACF;AACA;IACE,SAASQ,qBAAqBA,CAACV,WAAW,EAAEC,oBAAoB,EAAEC,kBAAkB,EAAE;MACrFlC,MAAM,CAACW,OAAO,CAAC,CAACU,KAAK,EAAER,KAAK,KAAK;QAChC,MAAM8B,cAAc,GAAGtB,KAAK,CAACE,YAAY,CAAC,iBAAiB,CAAC,IAAI,MAAM;;QAEtE;QACAF,KAAK,CAACuB,KAAK,CAACC,SAAS,GAAG,EAAE;QAC1BxB,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,EAAE;QACxBzB,KAAK,CAACuB,KAAK,CAACG,QAAQ,GAAG,EAAE;QAEzB,IAAIlC,KAAK,KAAKmB,WAAW,IAAIC,oBAAoB,KAAK,CAAC,CAAC,EAAE;UACzD;UACAZ,KAAK,CAAC2B,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;UAChC5B,KAAK,CAAC2B,SAAS,CAACE,MAAM,CAAC,qBAAqB,EAAE,sBAAsB,CAAC;UACrE7B,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;UACzBzB,KAAK,CAACuB,KAAK,CAACO,MAAM,GAAG,IAAI;QAC1B,CAAC,MAAM,IAAItC,KAAK,KAAKmB,WAAW,IAAIC,oBAAoB,KAAK,CAAC,CAAC,EAAE;UAChE;UACAZ,KAAK,CAAC2B,SAAS,CAACE,MAAM,CAAC,WAAW,EAAE,qBAAqB,CAAC;UAC1D7B,KAAK,CAAC2B,SAAS,CAACC,GAAG,CAAC,sBAAsB,CAAC;UAC3C5B,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;UACzBzB,KAAK,CAACuB,KAAK,CAACO,MAAM,GAAG,GAAG;QACzB,CAAC,MAAM,IAAItC,KAAK,KAAKoB,oBAAoB,EAAE;UAC1C;UACAZ,KAAK,CAAC2B,SAAS,CAACE,MAAM,CAAC,WAAW,EAAE,sBAAsB,CAAC;UAC3D7B,KAAK,CAAC2B,SAAS,CAACC,GAAG,CAAC,qBAAqB,CAAC;UAC1C5B,KAAK,CAACuB,KAAK,CAACO,MAAM,GAAG,IAAI;;UAEzB;UACA,QAAQR,cAAc;YACrB,KAAK,MAAM;cACVtB,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAGZ,kBAAkB;cACxC;YACD,KAAK,MAAM;cACV;cACAb,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;cACzBzB,KAAK,CAACuB,KAAK,CAACG,QAAQ,GAAG,WAAW,CAAC,CAAC,GAAGb,kBAAkB,IAAI,GAAG,QAAQ;cACxE;YACD,KAAK,OAAO;cACX;cACAb,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;cACzBzB,KAAK,CAACuB,KAAK,CAACG,QAAQ,GAAG,eAAe,CAAC,CAAC,GAAGb,kBAAkB,IAAI,GAAG,IAAI;cACxE;YACD,KAAK,IAAI;cACR;cACAb,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;cACzBzB,KAAK,CAACuB,KAAK,CAACG,QAAQ,GAAG,aAAa,CAAC,CAAC,GAAGb,kBAAkB,IAAI,GAAG,MAAM;cACxE;YACD,KAAK,MAAM;cACV;cACAb,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;cACzBzB,KAAK,CAACuB,KAAK,CAACG,QAAQ,GAAG,SAAS,CAAC,CAAC,GAAGb,kBAAkB,IAAI,GAAG,UAAU;cACxE;YACD;cACCb,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAGZ,kBAAkB;UAC1C;QACD,CAAC,MAAM;UACN;UACAb,KAAK,CAAC2B,SAAS,CAACE,MAAM,CAAC,WAAW,EAAE,qBAAqB,EAAE,sBAAsB,CAAC;UAClF7B,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;UACzBzB,KAAK,CAACuB,KAAK,CAACO,MAAM,GAAG,GAAG;QACzB;MACD,CAAC,CAAC;IACH;;IAEA;AACF;AACA;IACE,SAASC,cAAcA,CAAA,EAAG;MACzB,MAAMtB,SAAS,GAAGrB,MAAM,CAACQ,WAAW,IAAIoC,QAAQ,CAACC,eAAe,CAACxB,SAAS;MAC1E,MAAMtB,cAAc,GAAGC,MAAM,CAACC,WAAW;MACzC,MAAM6C,SAAS,GAAG1D,KAAK,CAACkB,qBAAqB,CAAC,CAAC;MAC/C,MAAMyC,QAAQ,GAAG1B,SAAS,GAAGyB,SAAS,CAACrC,GAAG;MAC1C,MAAMuC,WAAW,GAAGD,QAAQ,GAAG3D,KAAK,CAACuB,YAAY;;MAEjD;MACA,MAAMsC,QAAQ,GAAGH,SAAS,CAACrC,GAAG,GAAGV,cAAc,IAAI+C,SAAS,CAACI,MAAM,GAAG,CAAC;;MAEvE;MACA,MAAMC,cAAc,GAAGL,SAAS,CAACrC,GAAG,IAAI,CAAC,IAAIqC,SAAS,CAACI,MAAM,GAAGnD,cAAc;;MAE9E;MACAX,KAAK,CAACmD,SAAS,CAACa,MAAM,CAAC,YAAY,EAAEH,QAAQ,CAAC;MAC9C7D,KAAK,CAACmD,SAAS,CAACa,MAAM,CAAC,WAAW,EAAED,cAAc,CAAC;MAEnD,IAAI,CAACF,QAAQ,EAAE;QACd;QACA1D,MAAM,CAACW,OAAO,CAAC,CAACU,KAAK,EAAER,KAAK,KAAK;UAChC,IAAIA,KAAK,KAAK,CAAC,EAAE;YAChBQ,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;YACzBzB,KAAK,CAACuB,KAAK,CAACO,MAAM,GAAG,IAAI;YACzB9B,KAAK,CAAC2B,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;UACjC,CAAC,MAAM;YACN5B,KAAK,CAACuB,KAAK,CAACE,OAAO,GAAG,GAAG;YACzBzB,KAAK,CAACuB,KAAK,CAACO,MAAM,GAAG,GAAG;YACxB9B,KAAK,CAAC2B,SAAS,CAACE,MAAM,CAAC,WAAW,CAAC;UACpC;QACD,CAAC,CAAC;QACF7C,OAAO,GAAG,KAAK;QACf;MACD;;MAEA;MACA,MAAM;QAAE2B,WAAW;QAAEC,oBAAoB;QAAEC;MAAmB,CAAC,GAAGL,oBAAoB,CAACC,SAAS,CAAC;;MAEjG;MACAY,qBAAqB,CAACV,WAAW,EAAEC,oBAAoB,EAAEC,kBAAkB,CAAC;;MAE5E;MACArC,KAAK,CAACiE,OAAO,CAACC,YAAY,GAAG/B,WAAW;MAExC3B,OAAO,GAAG,KAAK;IAChB;;IAEA;AACF;AACA;IACE,SAAS2D,QAAQA,CAAA,EAAG;MACnB,IAAI,CAAC3D,OAAO,EAAE;QACbI,MAAM,CAACwD,qBAAqB,CAACb,cAAc,CAAC;QAC5C/C,OAAO,GAAG,IAAI;MACf;IACD;;IAEA;AACF;AACA;IACE,SAAS6D,QAAQA,CAAA,EAAG;MACnB3D,eAAe,CAAC,CAAC;MACjB6C,cAAc,CAAC,CAAC;IACjB;;IAEA;AACF;AACA;IACE,SAASe,IAAIA,CAAA,EAAG;MACf5D,eAAe,CAAC,CAAC;;MAEjB;MACAE,MAAM,CAAC2D,gBAAgB,CAAC,QAAQ,EAAEJ,QAAQ,EAAE;QAAEK,OAAO,EAAE;MAAK,CAAC,CAAC;MAC9D5D,MAAM,CAAC2D,gBAAgB,CAAC,QAAQ,EAAEF,QAAQ,EAAE;QAAEG,OAAO,EAAE;MAAK,CAAC,CAAC;;MAE9D;MACA,MAAMC,MAAM,GAAGzE,KAAK,CAACI,gBAAgB,CAAC,KAAK,CAAC;MAC5C,IAAIsE,YAAY,GAAG,CAAC;MACpB,MAAMC,WAAW,GAAGF,MAAM,CAAClE,MAAM;MAEjCkE,MAAM,CAAC3D,OAAO,CAAE8D,GAAG,IAAK;QACvB,IAAIA,GAAG,CAACC,QAAQ,EAAE;UACjBH,YAAY,EAAE;QACf,CAAC,MAAM;UACNE,GAAG,CAACL,gBAAgB,CAAC,MAAM,EAAE,MAAM;YAClCG,YAAY,EAAE;YACd,IAAIA,YAAY,KAAKC,WAAW,EAAE;cACjCjE,eAAe,CAAC,CAAC;cACjB6C,cAAc,CAAC,CAAC;YACjB;UACD,CAAC,CAAC;UACFqB,GAAG,CAACL,gBAAgB,CAAC,OAAO,EAAE,MAAM;YACnCG,YAAY,EAAE;UACf,CAAC,CAAC;QACH;MACD,CAAC,CAAC;;MAEF;MACAnB,cAAc,CAAC,CAAC;;MAEhB;MACAvD,KAAK,CAACiE,OAAO,CAACa,WAAW,GAAG,MAAM;IACnC;;IAEA;IACA9E,KAAK,CAAC+E,oBAAoB,GAAG,YAAY;MACxCnE,MAAM,CAACoE,mBAAmB,CAAC,QAAQ,EAAEb,QAAQ,CAAC;MAC9CvD,MAAM,CAACoE,mBAAmB,CAAC,QAAQ,EAAEX,QAAQ,CAAC;IAC/C,CAAC;;IAED;IACAC,IAAI,CAAC,CAAC;EACP;;EAEA;AACD;AACA;EACC,SAASW,aAAaA,CAAA,EAAG;IACxBzB,QAAQ,CAACpD,gBAAgB,CAAC,qBAAqB,CAAC,CAACU,OAAO,CAAEd,KAAK,IAAK;MACnE,IAAI,CAACA,KAAK,CAACiE,OAAO,CAACa,WAAW,EAAE;QAC/B/E,qBAAqB,CAACC,KAAK,CAAC;MAC7B;IACD,CAAC,CAAC;EACH;;EAEA;EACA,IAAIwD,QAAQ,CAAC0B,UAAU,KAAK,SAAS,EAAE;IACtC1B,QAAQ,CAACe,gBAAgB,CAAC,kBAAkB,EAAEU,aAAa,CAAC;EAC7D,CAAC,MAAM;IACNA,aAAa,CAAC,CAAC;EAChB;;EAEA;EACA,IAAI,OAAOE,gBAAgB,KAAK,WAAW,EAAE;IAC5C,MAAMC,QAAQ,GAAG,IAAID,gBAAgB,CAAEE,SAAS,IAAK;MACpDA,SAAS,CAACvE,OAAO,CAAEwE,QAAQ,IAAK;QAC/BA,QAAQ,CAACC,UAAU,CAACzE,OAAO,CAAE0E,IAAI,IAAK;UACrC,IAAIA,IAAI,CAACC,QAAQ,KAAK,CAAC,EAAE;YACxB,IAAID,IAAI,CAACrC,SAAS,EAAEuC,QAAQ,CAAC,oBAAoB,CAAC,EAAE;cACnD3F,qBAAqB,CAACyF,IAAI,CAAC;YAC5B;YACAA,IAAI,CAACpF,gBAAgB,GAAG,qBAAqB,CAAC,EAAEU,OAAO,CAACf,qBAAqB,CAAC;UAC/E;QACD,CAAC,CAAC;MACH,CAAC,CAAC;IACH,CAAC,CAAC;IAEFqF,QAAQ,CAACO,OAAO,CAACnC,QAAQ,CAACoC,IAAI,EAAE;MAAEC,SAAS,EAAE,IAAI;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;EACpE;AACD,CAAC,EAAE,CAAC,C","sources":["webpack://theme-blocks/./src/blocks/motion-scroll/view.js"],"sourcesContent":["/**\n * Motion Scroll Block Frontend JavaScript\n * \n * Handles scroll-driven image transitions in a split-layout format.\n * Media column is sticky, images transition as user scrolls through content sections.\n */\n\n(function () {\n\t'use strict';\n\n\t/**\n\t * Initialize a single motion scroll block\n\t */\n\tfunction initMotionScrollBlock(block) {\n\t\tconst mediaContainer = block.querySelector('.motion-scroll-media');\n\t\tconst frames = block.querySelectorAll('.motion-scroll-frame');\n\t\tconst contentContainer = block.querySelector('.motion-scroll-content');\n\t\tconst sections = block.querySelectorAll('.motion-scroll-section');\n\n\t\tif (!mediaContainer || frames.length === 0 || sections.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet ticking = false;\n\t\tlet sectionData = [];\n\n\t\t/**\n\t\t * Calculate layout metrics for each section\n\t\t */\n\t\tfunction calculateLayout() {\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\tsectionData = [];\n\n\t\t\tsections.forEach((section, index) => {\n\t\t\t\tconst rect = section.getBoundingClientRect();\n\t\t\t\tconst sectionTop = window.pageYOffset + rect.top;\n\t\t\t\tconst sectionHeight = section.offsetHeight;\n\t\t\t\t\n\t\t\t\t// Get transition config from corresponding frame\n\t\t\t\tconst frame = frames[index];\n\t\t\t\tconst speed = frame ? (frame.getAttribute('data-speed') || 'normal') : 'normal';\n\t\t\t\t\n\t\t\t\tlet transitionDistance;\n\t\t\t\tswitch (speed) {\n\t\t\t\t\tcase 'slow':\n\t\t\t\t\t\ttransitionDistance = viewportHeight * 0.8;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'fast':\n\t\t\t\t\t\ttransitionDistance = viewportHeight * 0.3;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\ttransitionDistance = viewportHeight * 0.5;\n\t\t\t\t}\n\n\t\t\t\tsectionData.push({\n\t\t\t\t\tindex,\n\t\t\t\t\tsection,\n\t\t\t\t\tframe: frame,\n\t\t\t\t\tsectionTop,\n\t\t\t\t\tsectionHeight,\n\t\t\t\t\tsectionBottom: sectionTop + sectionHeight,\n\t\t\t\t\t// Transition starts when section enters viewport\n\t\t\t\t\ttransitionStart: sectionTop - viewportHeight,\n\t\t\t\t\ttransitionEnd: sectionTop - viewportHeight + transitionDistance,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Determine which frame should be active based on scroll position\n\t\t */\n\t\tfunction getCurrentFrameState(scrollTop) {\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\tconst viewportCenter = scrollTop + (viewportHeight / 2);\n\t\t\t\n\t\t\tlet activeIndex = 0;\n\t\t\tlet transitioningToIndex = -1;\n\t\t\tlet transitionProgress = 0;\n\n\t\t\t// Find which section is most in view\n\t\t\tfor (let i = 0; i < sectionData.length; i++) {\n\t\t\t\tconst data = sectionData[i];\n\t\t\t\tconst sectionCenter = data.sectionTop + (data.sectionHeight / 2);\n\t\t\t\t\n\t\t\t\t// If viewport center is past this section's start\n\t\t\t\tif (viewportCenter >= data.sectionTop) {\n\t\t\t\t\tactiveIndex = i;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Check if we're in transition zone for the next section\n\t\t\t\tif (i > 0 && scrollTop >= sectionData[i].transitionStart && scrollTop <= sectionData[i].transitionEnd) {\n\t\t\t\t\ttransitioningToIndex = i;\n\t\t\t\t\tconst progressIntoTransition = scrollTop - sectionData[i].transitionStart;\n\t\t\t\t\tconst transitionDistance = sectionData[i].transitionEnd - sectionData[i].transitionStart;\n\t\t\t\t\ttransitionProgress = Math.min(1, Math.max(0, progressIntoTransition / transitionDistance));\n\t\t\t\t\tactiveIndex = i - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { activeIndex, transitioningToIndex, transitionProgress };\n\t\t}\n\n\t\t/**\n\t\t * Apply transition effects to frames\n\t\t */\n\t\tfunction applyFrameTransitions(activeIndex, transitioningToIndex, transitionProgress) {\n\t\t\tframes.forEach((frame, index) => {\n\t\t\t\tconst transitionType = frame.getAttribute('data-transition') || 'fade';\n\t\t\t\t\n\t\t\t\t// Reset styles\n\t\t\t\tframe.style.transform = '';\n\t\t\t\tframe.style.opacity = '';\n\t\t\t\tframe.style.clipPath = '';\n\t\t\t\t\n\t\t\t\tif (index === activeIndex && transitioningToIndex === -1) {\n\t\t\t\t\t// Active frame, no transition happening\n\t\t\t\t\tframe.classList.add('is-active');\n\t\t\t\t\tframe.classList.remove('is-transitioning-in', 'is-transitioning-out');\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.zIndex = '10';\n\t\t\t\t} else if (index === activeIndex && transitioningToIndex !== -1) {\n\t\t\t\t\t// Active frame, but transitioning out\n\t\t\t\t\tframe.classList.remove('is-active', 'is-transitioning-in');\n\t\t\t\t\tframe.classList.add('is-transitioning-out');\n\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\tframe.style.zIndex = '9';\n\t\t\t\t} else if (index === transitioningToIndex) {\n\t\t\t\t\t// Frame transitioning in\n\t\t\t\t\tframe.classList.remove('is-active', 'is-transitioning-out');\n\t\t\t\t\tframe.classList.add('is-transitioning-in');\n\t\t\t\t\tframe.style.zIndex = '10';\n\t\t\t\t\t\n\t\t\t\t\t// Apply transition based on type\n\t\t\t\t\tswitch (transitionType) {\n\t\t\t\t\t\tcase 'fade':\n\t\t\t\t\t\t\tframe.style.opacity = transitionProgress;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'left':\n\t\t\t\t\t\t\t// Wipe from left edge toward right\n\t\t\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\t\t\tframe.style.clipPath = `inset(0 ${(1 - transitionProgress) * 100}% 0 0)`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'right':\n\t\t\t\t\t\t\t// Wipe from right edge toward left\n\t\t\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\t\t\tframe.style.clipPath = `inset(0 0 0 ${(1 - transitionProgress) * 100}%)`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'up':\n\t\t\t\t\t\t\t// Wipe from top edge downward\n\t\t\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\t\t\tframe.style.clipPath = `inset(0 0 ${(1 - transitionProgress) * 100}% 0)`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'down':\n\t\t\t\t\t\t\t// Wipe from bottom edge upward\n\t\t\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\t\t\tframe.style.clipPath = `inset(${(1 - transitionProgress) * 100}% 0 0 0)`;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tframe.style.opacity = transitionProgress;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Hidden frame\n\t\t\t\t\tframe.classList.remove('is-active', 'is-transitioning-in', 'is-transitioning-out');\n\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\tframe.style.zIndex = '5';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Main scroll handler\n\t\t */\n\t\tfunction updateOnScroll() {\n\t\t\tconst scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\t\t\tconst viewportHeight = window.innerHeight;\n\t\t\tconst blockRect = block.getBoundingClientRect();\n\t\t\tconst blockTop = scrollTop + blockRect.top;\n\t\t\tconst blockBottom = blockTop + block.offsetHeight;\n\n\t\t\t// Check if block is in view\n\t\t\tconst isInView = blockRect.top < viewportHeight && blockRect.bottom > 0;\n\t\t\t\n\t\t\t// Check if media should be sticky (block top is at or above viewport top)\n\t\t\tconst shouldBeSticky = blockRect.top <= 0 && blockRect.bottom > viewportHeight;\n\n\t\t\t// Update block state classes\n\t\t\tblock.classList.toggle('is-in-view', isInView);\n\t\t\tblock.classList.toggle('is-sticky', shouldBeSticky);\n\n\t\t\tif (!isInView) {\n\t\t\t\t// Not in view, show first frame\n\t\t\t\tframes.forEach((frame, index) => {\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\tframe.style.opacity = '1';\n\t\t\t\t\t\tframe.style.zIndex = '10';\n\t\t\t\t\t\tframe.classList.add('is-active');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tframe.style.opacity = '0';\n\t\t\t\t\t\tframe.style.zIndex = '5';\n\t\t\t\t\t\tframe.classList.remove('is-active');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tticking = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get current frame state\n\t\t\tconst { activeIndex, transitioningToIndex, transitionProgress } = getCurrentFrameState(scrollTop);\n\n\t\t\t// Apply frame transitions\n\t\t\tapplyFrameTransitions(activeIndex, transitioningToIndex, transitionProgress);\n\n\t\t\t// Store current frame for potential use\n\t\t\tblock.dataset.currentFrame = activeIndex;\n\n\t\t\tticking = false;\n\t\t}\n\n\t\t/**\n\t\t * Throttled scroll handler\n\t\t */\n\t\tfunction onScroll() {\n\t\t\tif (!ticking) {\n\t\t\t\twindow.requestAnimationFrame(updateOnScroll);\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Handle resize\n\t\t */\n\t\tfunction onResize() {\n\t\t\tcalculateLayout();\n\t\t\tupdateOnScroll();\n\t\t}\n\n\t\t/**\n\t\t * Initialize\n\t\t */\n\t\tfunction init() {\n\t\t\tcalculateLayout();\n\t\t\t\n\t\t\t// Set up event listeners\n\t\t\twindow.addEventListener('scroll', onScroll, { passive: true });\n\t\t\twindow.addEventListener('resize', onResize, { passive: true });\n\n\t\t\t// Recalculate after images load\n\t\t\tconst images = block.querySelectorAll('img');\n\t\t\tlet imagesLoaded = 0;\n\t\t\tconst totalImages = images.length;\n\n\t\t\timages.forEach((img) => {\n\t\t\t\tif (img.complete) {\n\t\t\t\t\timagesLoaded++;\n\t\t\t\t} else {\n\t\t\t\t\timg.addEventListener('load', () => {\n\t\t\t\t\t\timagesLoaded++;\n\t\t\t\t\t\tif (imagesLoaded === totalImages) {\n\t\t\t\t\t\t\tcalculateLayout();\n\t\t\t\t\t\t\tupdateOnScroll();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\timg.addEventListener('error', () => {\n\t\t\t\t\t\timagesLoaded++;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Initial update\n\t\t\tupdateOnScroll();\n\n\t\t\t// Mark as initialized\n\t\t\tblock.dataset.initialized = 'true';\n\t\t}\n\n\t\t// Store cleanup function\n\t\tblock._motionScrollCleanup = function () {\n\t\t\twindow.removeEventListener('scroll', onScroll);\n\t\t\twindow.removeEventListener('resize', onResize);\n\t\t};\n\n\t\t// Initialize\n\t\tinit();\n\t}\n\n\t/**\n\t * Initialize all motion scroll blocks on the page\n\t */\n\tfunction initAllBlocks() {\n\t\tdocument.querySelectorAll('.caes-motion-scroll').forEach((block) => {\n\t\t\tif (!block.dataset.initialized) {\n\t\t\t\tinitMotionScrollBlock(block);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Initialize when DOM is ready\n\tif (document.readyState === 'loading') {\n\t\tdocument.addEventListener('DOMContentLoaded', initAllBlocks);\n\t} else {\n\t\tinitAllBlocks();\n\t}\n\n\t// Re-initialize if new blocks are added\n\tif (typeof MutationObserver !== 'undefined') {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tmutation.addedNodes.forEach((node) => {\n\t\t\t\t\tif (node.nodeType === 1) {\n\t\t\t\t\t\tif (node.classList?.contains('caes-motion-scroll')) {\n\t\t\t\t\t\t\tinitMotionScrollBlock(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnode.querySelectorAll?.('.caes-motion-scroll')?.forEach(initMotionScrollBlock);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tobserver.observe(document.body, { childList: true, subtree: true });\n\t}\n})();\n"],"names":["initMotionScrollBlock","block","mediaContainer","querySelector","frames","querySelectorAll","contentContainer","sections","length","ticking","sectionData","calculateLayout","viewportHeight","window","innerHeight","forEach","section","index","rect","getBoundingClientRect","sectionTop","pageYOffset","top","sectionHeight","offsetHeight","frame","speed","getAttribute","transitionDistance","push","sectionBottom","transitionStart","transitionEnd","getCurrentFrameState","scrollTop","viewportCenter","activeIndex","transitioningToIndex","transitionProgress","i","data","sectionCenter","progressIntoTransition","Math","min","max","applyFrameTransitions","transitionType","style","transform","opacity","clipPath","classList","add","remove","zIndex","updateOnScroll","document","documentElement","blockRect","blockTop","blockBottom","isInView","bottom","shouldBeSticky","toggle","dataset","currentFrame","onScroll","requestAnimationFrame","onResize","init","addEventListener","passive","images","imagesLoaded","totalImages","img","complete","initialized","_motionScrollCleanup","removeEventListener","initAllBlocks","readyState","MutationObserver","observer","mutations","mutation","addedNodes","node","nodeType","contains","observe","body","childList","subtree"],"sourceRoot":""}