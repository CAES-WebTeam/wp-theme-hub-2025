{"version":3,"file":"blocks/motion-scroll/view.js","mappings":";;;;AAAA;AACA;AACA;AACA;;AAEAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAY;EACzD,MAAMC,kBAAkB,GAAGF,QAAQ,CAACG,gBAAgB,CAAC,qBAAqB,CAAC;EAE3ED,kBAAkB,CAACE,OAAO,CAAEC,KAAK,IAAK;IACrC,MAAMC,OAAO,GAAGD,KAAK,CAACE,aAAa,CAAC,wBAAwB,CAAC;IAC7D,MAAMC,MAAM,GAAGH,KAAK,CAACF,gBAAgB,CAAC,sBAAsB,CAAC;IAC7D,MAAMM,UAAU,GAAGC,QAAQ,CAACL,KAAK,CAACM,YAAY,CAAC,kBAAkB,CAAC,IAAIH,MAAM,CAACI,MAAM,EAAE,EAAE,CAAC;IAExF,IAAIH,UAAU,KAAK,CAAC,IAAI,CAACH,OAAO,EAAE;MACjC;IACD;IAEA,IAAIO,iBAAiB,GAAG,CAAC;;IAEzB;IACA,SAASC,iBAAiBA,CAAA,EAAG;MAC5B,MAAMC,IAAI,GAAGT,OAAO,CAACU,qBAAqB,CAAC,CAAC;MAC5C,MAAMC,UAAU,GAAGF,IAAI,CAACG,GAAG;MAC3B,MAAMC,aAAa,GAAGJ,IAAI,CAACK,MAAM;MACjC,MAAMC,cAAc,GAAGC,MAAM,CAACC,WAAW;;MAEzC;MACA;MACA;MACA,MAAMC,cAAc,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAE,CAACV,UAAU,IAAIE,aAAa,GAAGE,cAAc,CAAC,CAAC,CAAC;;MAE/F;MACA,MAAMO,gBAAgB,GAAGH,IAAI,CAACE,GAAG,CAChClB,UAAU,GAAG,CAAC,EACdgB,IAAI,CAACI,KAAK,CAACL,cAAc,GAAGf,UAAU,CACvC,CAAC;;MAED;MACA,IAAImB,gBAAgB,KAAKf,iBAAiB,EAAE;QAC3CL,MAAM,CAACK,iBAAiB,CAAC,EAAEiB,SAAS,CAACC,MAAM,CAAC,WAAW,CAAC;QACxDvB,MAAM,CAACoB,gBAAgB,CAAC,EAAEE,SAAS,CAACE,GAAG,CAAC,WAAW,CAAC;QACpDnB,iBAAiB,GAAGe,gBAAgB;MACrC;IACD;;IAEA;IACA,IAAIK,OAAO,GAAG,KAAK;IACnB,SAASC,QAAQA,CAAA,EAAG;MACnB,IAAI,CAACD,OAAO,EAAE;QACbX,MAAM,CAACa,qBAAqB,CAAC,MAAM;UAClCrB,iBAAiB,CAAC,CAAC;UACnBmB,OAAO,GAAG,KAAK;QAChB,CAAC,CAAC;QACFA,OAAO,GAAG,IAAI;MACf;IACD;;IAEA;IACAnB,iBAAiB,CAAC,CAAC;;IAEnB;IACAQ,MAAM,CAACrB,gBAAgB,CAAC,QAAQ,EAAEiC,QAAQ,EAAE;MAAEE,OAAO,EAAE;IAAK,CAAC,CAAC;;IAE9D;IACA;IACA,IAAI,sBAAsB,IAAId,MAAM,EAAE;MACrC,MAAMe,QAAQ,GAAG,IAAIC,oBAAoB,CACvCC,OAAO,IAAK;QACZA,OAAO,CAACnC,OAAO,CAAEoC,KAAK,IAAK;UAC1B,IAAIA,KAAK,CAACC,cAAc,EAAE;YACzB3B,iBAAiB,CAAC,CAAC;UACpB;QACD,CAAC,CAAC;MACH,CAAC,EACD;QACC4B,SAAS,EAAE,CAAC;QACZC,UAAU,EAAE;MACb,CACD,CAAC;MAEDN,QAAQ,CAACO,OAAO,CAACvC,KAAK,CAAC;IACxB;EACD,CAAC,CAAC;AACH,CAAC,CAAC,C","sources":["webpack://theme-blocks/./src/blocks/motion-scroll/view.js"],"sourcesContent":["/**\n * Motion Scroll Block Frontend Script\n * Handles scroll-triggered image transitions\n */\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\tconst motionScrollBlocks = document.querySelectorAll('.caes-motion-scroll');\n\n\tmotionScrollBlocks.forEach((block) => {\n\t\tconst content = block.querySelector('.motion-scroll-content');\n\t\tconst slides = block.querySelectorAll('.motion-scroll-slide');\n\t\tconst slideCount = parseInt(block.getAttribute('data-slide-count') || slides.length, 10);\n\n\t\tif (slideCount === 0 || !content) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentSlideIndex = 0;\n\n\t\t// Function to update active slide based on scroll position\n\t\tfunction updateActiveSlide() {\n\t\t\tconst rect = content.getBoundingClientRect();\n\t\t\tconst contentTop = rect.top;\n\t\t\tconst contentHeight = rect.height;\n\t\t\tconst viewportHeight = window.innerHeight;\n\n\t\t\t// Calculate how far through the content we've scrolled\n\t\t\t// When content top is at viewport top (0), we're at the start\n\t\t\t// When content bottom is at viewport top, we're at the end\n\t\t\tconst scrollProgress = Math.max(0, Math.min(1, -contentTop / (contentHeight - viewportHeight)));\n\n\t\t\t// Determine which slide should be active based on scroll progress\n\t\t\tconst targetSlideIndex = Math.min(\n\t\t\t\tslideCount - 1,\n\t\t\t\tMath.floor(scrollProgress * slideCount)\n\t\t\t);\n\n\t\t\t// Only update if the slide has changed\n\t\t\tif (targetSlideIndex !== currentSlideIndex) {\n\t\t\t\tslides[currentSlideIndex]?.classList.remove('is-active');\n\t\t\t\tslides[targetSlideIndex]?.classList.add('is-active');\n\t\t\t\tcurrentSlideIndex = targetSlideIndex;\n\t\t\t}\n\t\t}\n\n\t\t// Throttle scroll events for performance\n\t\tlet ticking = false;\n\t\tfunction onScroll() {\n\t\t\tif (!ticking) {\n\t\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\t\tupdateActiveSlide();\n\t\t\t\t\tticking = false;\n\t\t\t\t});\n\t\t\t\tticking = true;\n\t\t\t}\n\t\t}\n\n\t\t// Initial check\n\t\tupdateActiveSlide();\n\n\t\t// Listen for scroll events\n\t\twindow.addEventListener('scroll', onScroll, { passive: true });\n\n\t\t// Optional: Intersection Observer for performance optimization\n\t\t// Only update when the block is in view\n\t\tif ('IntersectionObserver' in window) {\n\t\t\tconst observer = new IntersectionObserver(\n\t\t\t\t(entries) => {\n\t\t\t\t\tentries.forEach((entry) => {\n\t\t\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\t\t\tupdateActiveSlide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tthreshold: 0,\n\t\t\t\t\trootMargin: '100px',\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tobserver.observe(block);\n\t\t}\n\t});\n});\n"],"names":["document","addEventListener","motionScrollBlocks","querySelectorAll","forEach","block","content","querySelector","slides","slideCount","parseInt","getAttribute","length","currentSlideIndex","updateActiveSlide","rect","getBoundingClientRect","contentTop","top","contentHeight","height","viewportHeight","window","innerHeight","scrollProgress","Math","max","min","targetSlideIndex","floor","classList","remove","add","ticking","onScroll","requestAnimationFrame","passive","observer","IntersectionObserver","entries","entry","isIntersecting","threshold","rootMargin","observe"],"sourceRoot":""}