!function(){"use strict";function t(t){const e=t.querySelector(".motion-scroll-media"),i=t.querySelectorAll(".motion-scroll-frame"),n=(t.querySelector(".motion-scroll-content"),t.querySelectorAll(".motion-scroll-section"));if(!e||0===i.length||0===n.length)return;let s=!1,o=[];function a(){const t=window.innerHeight;o=[],n.forEach(((e,n)=>{const s=e.getBoundingClientRect(),a=window.pageYOffset+s.top,c=e.offsetHeight,r=i[n];let l;switch(r&&r.getAttribute("data-speed")||"normal"){case"slow":l=.8*t;break;case"fast":l=.3*t;break;default:l=.5*t}o.push({index:n,section:e,frame:r,sectionTop:a,sectionHeight:c,sectionBottom:a+c,transitionStart:a-t,transitionEnd:a-t+l})}))}function c(){const e=window.pageYOffset||document.documentElement.scrollTop,n=window.innerHeight,a=t.getBoundingClientRect(),c=(a.top,t.offsetHeight,a.top<n&&a.bottom>0),r=a.top<=0&&a.bottom>n;if(t.classList.toggle("is-in-view",c),t.classList.toggle("is-sticky",r),!c)return i.forEach(((t,e)=>{0===e?(t.style.opacity="1",t.style.zIndex="10",t.classList.add("is-active")):(t.style.opacity="0",t.style.zIndex="5",t.classList.remove("is-active"))})),void(s=!1);const{activeIndex:l,transitioningToIndex:d,transitionProgress:u}=function(t){const e=t+window.innerHeight/2;let i=0,n=-1,s=0;for(let a=0;a<o.length;a++){const c=o[a];if(c.sectionTop,c.sectionHeight,e>=c.sectionTop&&(i=a),a>0&&t>=o[a].transitionStart&&t<=o[a].transitionEnd){n=a;const e=t-o[a].transitionStart,c=o[a].transitionEnd-o[a].transitionStart;s=Math.min(1,Math.max(0,e/c)),i=a-1}}return{activeIndex:i,transitioningToIndex:n,transitionProgress:s}}(e);!function(t,e,n){i.forEach(((i,s)=>{const o=i.getAttribute("data-transition")||"fade";if(i.style.transform="",i.style.opacity="",i.style.clipPath="",s===t&&-1===e)i.classList.add("is-active"),i.classList.remove("is-transitioning-in","is-transitioning-out"),i.style.opacity="1",i.style.zIndex="10";else if(s===t&&-1!==e)i.classList.remove("is-active","is-transitioning-in"),i.classList.add("is-transitioning-out"),i.style.opacity="1",i.style.zIndex="9";else if(s===e)switch(i.classList.remove("is-active","is-transitioning-out"),i.classList.add("is-transitioning-in"),i.style.zIndex="10",o){case"fade":default:i.style.opacity=n;break;case"left":i.style.opacity="1",i.style.clipPath=`inset(0 ${100*(1-n)}% 0 0)`;break;case"right":i.style.opacity="1",i.style.clipPath=`inset(0 0 0 ${100*(1-n)}%)`;break;case"up":i.style.opacity="1",i.style.clipPath=`inset(0 0 ${100*(1-n)}% 0)`;break;case"down":i.style.opacity="1",i.style.clipPath=`inset(${100*(1-n)}% 0 0 0)`}else i.classList.remove("is-active","is-transitioning-in","is-transitioning-out"),i.style.opacity="0",i.style.zIndex="5"}))}(l,d,u),t.dataset.currentFrame=l,s=!1}function r(){s||(window.requestAnimationFrame(c),s=!0)}function l(){a(),c()}t._motionScrollCleanup=function(){window.removeEventListener("scroll",r),window.removeEventListener("resize",l)},function(){a(),window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("resize",l,{passive:!0});const e=t.querySelectorAll("img");let i=0;const n=e.length;e.forEach((t=>{t.complete?i++:(t.addEventListener("load",(()=>{i++,i===n&&(a(),c())})),t.addEventListener("error",(()=>{i++})))})),c(),t.dataset.initialized="true"}()}function e(){document.querySelectorAll(".caes-motion-scroll").forEach((e=>{e.dataset.initialized||t(e)}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),"undefined"!=typeof MutationObserver&&new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{1===e.nodeType&&(e.classList?.contains("caes-motion-scroll")&&t(e),e.querySelectorAll?.(".caes-motion-scroll")?.forEach(t))}))}))})).observe(document.body,{childList:!0,subtree:!0})}();