document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("category-select"),t=document.querySelector(".wp-block-query"),o=t.querySelector(".wp-block-post-template");let n=o.children[0].cloneNode(!0);const r=o.children.length;e&&t&&e.addEventListener("change",(function(){const t=e.value;let d="/wp-json/wp/v2/posts?per_page=10&_embed=wp:featuredmedia,wp:term";t&&(d+=`&categories=${t}`,console.log(d)),fetch(d,{method:"GET"}).then((e=>{if(!e.ok)throw new Error(`Error: ${e.statusText}`);return e.json()})).then((e=>{o.innerHTML="";const t=Math.max(e.length,r);for(let r=0;r<t;r++){let t;if(e[r]){t=n.cloneNode(!0);const o=e[r],d=t.querySelector(".wp-block-post-title a"),c=t.querySelector(".wp-block-post-featured-image img"),l=t.querySelector(".wp-block-post-excerpt p"),s=t.querySelector(".wp-block-post-terms");if(d&&(d.textContent=o.title.rendered,d.href=o.link),c&&o._embedded&&o._embedded["wp:featuredmedia"]&&o._embedded["wp:featuredmedia"][0].source_url){const e=o._embedded["wp:featuredmedia"][0].source_url;c.src=e,console.log(e)}else c&&(c.style.display="none");if(l&&(l.innerHTML=o.excerpt.rendered),s&&o._embedded&&o._embedded["wp:term"]){const e=o._embedded["wp:term"][0];s.innerHTML="",e.forEach((e=>{const t=document.createElement("a");t.href=`/category/${e.slug}`,t.textContent=e.name,s.appendChild(t),s.innerHTML+=", "})),s.innerHTML=s.innerHTML.slice(0,-2)}}else t=n.cloneNode(!0),t.style.display="none";o.appendChild(t)}})).catch((e=>{console.error("Failed to fetch posts:",e)}))}))}));