(()=>{"use strict";var e,t={5166:(e,t,n)=>{const a=window.wp.blocks,l=window.wp.i18n,s=window.wp.blockEditor,o=window.wp.components,i=window.wp.element,r=window.wp.apiFetch;var p=n.n(r);const d=window.ReactJSXRuntime,c=["","--wp--preset--spacing--20","--wp--preset--spacing--30","--wp--preset--spacing--40","--wp--preset--spacing--50","--wp--preset--spacing--60","--wp--preset--spacing--70","--wp--preset--spacing--80"],u=["None (no gap)","2X-Small","X-Small","Small","Medium","Large","X-Large","2X-Large"],h=JSON.parse('{"UU":"caes-hub/hand-picked-post"}');(0,a.registerBlockType)(h.UU,{edit:function({attributes:e,setAttributes:t}){const{postIds:n=[],postType:a=["post"],feedType:r="related-topics",numberOfItems:h=5,customGapStep:m=0,displayLayout:g="list",columns:b=3,gridItemPosition:f="manual",gridAutoColumnWidth:_=12,gridAutoColumnUnit:v="rem"}=e,k=Array.isArray(a)?a:[a],x=[{value:"post",label:"Posts",restBase:"posts"},{value:"page",label:"Pages",restBase:"pages"},{value:"shorthand_story",label:"Shorthand Stories",restBase:"shorthand_story"},{value:"publications",label:"Publications",restBase:"publications"}],[w,C]=(0,i.useState)([]),[y,j]=(0,i.useState)([]),[T,B]=(0,i.useState)(!1),[P,S]=(0,i.useState)(""),[I,O]=(0,i.useState)(!1);(0,i.useEffect)((()=>{k.length&&(B(!0),Promise.all(k.map((e=>{const t=x.find((t=>t.value===e))?.restBase||e;return p()({path:`/wp/v2/${t}?per_page=20&_fields=id,title,slug`}).then((t=>t.map((t=>({id:t.id,label:t.title.rendered||`(${e} #${t.id})`,postType:e}))))).catch((()=>[]))}))).then((e=>{C(e.flat()),B(!1)})).catch((()=>{C([]),B(!1)})))}),[k.sort().join(",")]),(0,i.useEffect)((()=>{if(!n.length)return void j([]);const e=n.filter((e=>!y.find((t=>t.id===e))&&!w.find((t=>t.id===e))));if(0!==e.length)(async()=>{const t=(await Promise.all(k.map((async t=>{const n=x.find((e=>e.value===t))?.restBase||t,a=e;if(0===a.length)return[];try{return(await p()({path:`/wp/v2/${n}?include=${a.join(",")}&_fields=id,title,slug`})).map((e=>({id:e.id,label:e.title.rendered||`(${t} #${e.id})`,postType:t})))}catch(e){return[]}})))).flat(),a=n.map((e=>y.find((t=>t.id===e))||w.find((t=>t.id===e))||t.find((t=>t.id===e)))).filter(Boolean);j(a)})();else{const e=n.map((e=>y.find((t=>t.id===e))||w.find((t=>t.id===e)))).filter(Boolean);j(e)}}),[n,k]);const $=function(e){const t=(0,i.useRef)(null);return(0,i.useMemo)((()=>(...n)=>{t.current&&clearTimeout(t.current),t.current=setTimeout((()=>{e(...n)}),300)}),[e,300])}((async e=>{if(e&&!(e.length<3)){O(!0);try{const t=await Promise.all(k.map((t=>{const n=x.find((e=>e.value===t))?.restBase||t;return p()({path:`/wp/v2/${n}?search=${encodeURIComponent(e)}&per_page=50&orderby=relevance&_fields=id,title,slug`}).then((e=>e.map((e=>({id:e.id,label:e.title.rendered||`(${t} #${e.id})`,postType:t}))))).catch((()=>[]))})));C(t.flat())}catch(e){console.error("Search error:",e),C([])}finally{O(!1)}}}));(0,i.useEffect)((()=>()=>{$.cancel&&$.cancel()}),[$]);const A=(0,i.useMemo)((()=>{const e=[...y];return w.forEach((t=>{e.find((e=>e.id===t.id))||e.push(t)})),e}),[y,w]),F=n.map((e=>{const t=A.find((t=>t.id===e));return t?t.label:`Post #${e}`})),G=A.map((e=>e.label)),N=`${"grid"===g?`hand-picked-post-grid columns-${b}`:"hand-picked-post-list"} ${m>0?`gap-${c[m].replace(/^--/,"").replace(/--/g,"-")}`:""}`.trim(),L=(0,s.useBlockProps)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.InspectorControls,{children:(0,d.jsxs)(o.PanelBody,{title:(0,l.__)("Featured Content Settings","hand-picked-post"),children:[(0,d.jsx)(o.RadioControl,{label:(0,l.__)("Feed Type","hand-picked-post"),selected:r,options:[{label:(0,l.__)("Related Topics","hand-picked-post"),value:"related-topics"},{label:(0,l.__)("Hand Pick Posts","hand-picked-post"),value:"hand-picked"}],onChange:e=>t({feedType:e,postIds:[]})}),(0,d.jsx)(o.PanelBody,{title:(0,l.__)("Select Post Types","hand-picked-post"),initialOpen:!0,children:x.map((({value:e,label:n})=>(0,d.jsx)(o.CheckboxControl,{label:n,checked:k.includes(e),onChange:()=>(e=>{const n=k.includes(e)?k.filter((t=>t!==e)):[...k,e];t({postType:n,postIds:[]})})(e)},e)))}),"hand-picked"===r&&k.length>0&&(0,d.jsxs)(d.Fragment,{children:[(T||I)&&(0,d.jsx)(o.Spinner,{}),!T&&(0,d.jsx)(o.FormTokenField,{label:(0,l.__)("Select Posts","hand-picked-post"),value:F,suggestions:G,onInputChange:e=>{S(e),$(e)},onChange:e=>{const n=e.map((e=>{const t=A.find((t=>t.label===e));return t?t.id:null})).filter((e=>null!==e));t({postIds:n})},placeholder:(0,l.__)("Type at least 3 characters to search all posts...","hand-picked-post"),disabled:T})]}),"related-topics"===r&&(0,d.jsx)(o.__experimentalNumberControl,{label:(0,l.__)("Number of Items","hand-picked-post"),value:h,min:1,onChange:e=>t({numberOfItems:parseInt(e,10)})}),"grid"===g&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(o.__experimentalToggleGroupControl,{label:(0,l.__)("Grid Item Position","hand-picked-post"),value:f,onChange:e=>t({gridItemPosition:e}),isBlock:!0,children:[(0,d.jsx)(o.__experimentalToggleGroupControlOption,{value:"auto",label:"Automatic"}),(0,d.jsx)(o.__experimentalToggleGroupControlOption,{value:"manual",label:"Manual"})]})}),"grid"===g&&"auto"===f&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.__experimentalNumberControl,{label:(0,l.__)("Auto Column Width","hand-picked-post"),value:_,onChange:e=>t({gridAutoColumnWidth:parseFloat(e)}),min:1,step:1}),(0,d.jsx)(o.SelectControl,{label:(0,l.__)("Auto Column Unit","hand-picked-post"),value:v,onChange:e=>t({gridAutoColumnUnit:e}),options:[{value:"rem",label:"rem"},{value:"px",label:"px"},{value:"%",label:"%"}]})]}),"grid"===g&&"manual"===f&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.RangeControl,{label:(0,l.__)("Number of Columns","hand-picked-post"),value:b,onChange:e=>t({columns:e}),min:1,max:16}),(0,d.jsx)(o.RangeControl,{label:(0,l.__)("Gap between items","hand-picked-post"),value:m,onChange:e=>t({customGapStep:e}),min:0,max:c.length-1,step:1,help:u[m]?u[m]:"No gap"})]})]})}),(0,d.jsx)(s.BlockControls,{children:(0,d.jsxs)(o.ToolbarGroup,{children:[(0,d.jsx)(o.ToolbarButton,{icon:"list-view",label:(0,l.__)("List View","hand-picked-post"),isPressed:"list"===g,onClick:()=>t({displayLayout:"list"})}),(0,d.jsx)(o.ToolbarButton,{icon:"grid-view",label:(0,l.__)("Grid View","hand-picked-post"),isPressed:"grid"===g,onClick:()=>t({displayLayout:"grid"})})]})}),(0,d.jsx)("div",{...L,children:(0,d.jsxs)("div",{className:N,children:["hand-picked"===r&&(!n||0===n.length)&&(0,d.jsx)("p",{className:"hand-picked-post-empty",children:(0,l.__)("Please select one or more posts from the sidebar.","hand-picked-post")}),("hand-picked"===r&&n&&n.length>0||"related-topics"===r)&&(0,d.jsx)(s.InnerBlocks,{template:[["core/post-title",{}],["core/post-excerpt",{}]],templateLock:!1,renderAppender:s.InnerBlocks.ButtonBlockAppender})]})})]})},save:function(){return(0,d.jsx)(s.InnerBlocks.Content,{})}})}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,a),s.exports}a.m=t,e=[],a.O=(t,n,l,s)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,l,s]=e[d],i=!0,r=0;r<n.length;r++)(!1&s||o>=s)&&Object.keys(a.O).every((e=>a.O[e](n[r])))?n.splice(r--,1):(i=!1,s<o&&(o=s));if(i){e.splice(d--,1);var p=l();void 0!==p&&(t=p)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,l,s]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={3786:0,5214:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var l,s,[o,i,r]=n,p=0;if(o.some((t=>0!==e[t]))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(r)var d=r(a)}for(t&&t(n);p<o.length;p++)s=o[p],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},n=globalThis.webpackChunktheme_blocks=globalThis.webpackChunktheme_blocks||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=a.O(void 0,[5214],(()=>a(5166)));l=a.O(l)})();