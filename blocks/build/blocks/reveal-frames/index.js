(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,r=window.wp.blockEditor,s=window.ReactJSXRuntime,a=(e,t)=>{if(!e||e.length<2)return null;const r=e=>{let t=e.replace("#","");return 3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:parseInt(t.slice(0,2),16)/255,g:parseInt(t.slice(2,4),16)/255,b:parseInt(t.slice(4,6),16)/255}},a=r(e[0]),n=r(e[1]);return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 0 0",width:"0",height:"0",focusable:"false",role:"none",style:{visibility:"hidden",position:"absolute",left:"-9999px",overflow:"hidden"},"aria-hidden":"true",children:(0,s.jsx)("defs",{children:(0,s.jsxs)("filter",{id:t,children:[(0,s.jsx)("feColorMatrix",{colorInterpolationFilters:"sRGB",type:"matrix",values:".299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 0 0 0 1 0"}),(0,s.jsxs)("feComponentTransfer",{colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFuncR",{type:"table",tableValues:`${a.r} ${n.r}`}),(0,s.jsx)("feFuncG",{type:"table",tableValues:`${a.g} ${n.g}`}),(0,s.jsx)("feFuncB",{type:"table",tableValues:`${a.b} ${n.b}`}),(0,s.jsx)("feFuncA",{type:"table",tableValues:"0 1"})]})]})})})},n=(e,t)=>{if(!e)return"transparent";const r=(t||0)/100,s=e.replace("#","");return`rgba(${parseInt(s.substring(0,2),16)}, ${parseInt(s.substring(2,4),16)}, ${parseInt(s.substring(4,6),16)}, ${r})`},l=JSON.parse('{"UU":"caes-hub/reveal-frames"}');(0,e.registerBlockType)(l.UU,{edit:({attributes:e,context:l,clientId:o})=>{var i;const{frameIndex:d,frameLabel:c}=e,p=l["caes-hub/reveal-frames"]||[],u=l["caes-hub/reveal-overlayColor"]||"#000000",x=null!==(i=l["caes-hub/reveal-overlayOpacity"])&&void 0!==i?i:30,f=p[d]||null,b=f?.desktopImage||null,v=f?.desktopFocalPoint||{x:.5,y:.5},g=f?.desktopDuotone||f?.duotone||null,m=`reveal-frame-editor-${o}`,h=(0,r.useBlockProps)({className:"reveal-frames-editor","data-frame-label":c,style:{position:"relative",minHeight:"100vh",borderRadius:"4px",overflow:"hidden",marginBottom:"8px"}}),y=(0,r.useInnerBlocksProps)({className:"reveal-frames-content",style:{position:"relative",zIndex:5,minHeight:"100vh",padding:"60px 40px 40px",display:"flex",flexDirection:"column"}},{templateLock:!1,renderAppender:r.InnerBlocks.ButtonBlockAppender});return(0,s.jsxs)("div",{...h,children:[b?(0,s.jsxs)("div",{className:"reveal-frames-background",style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0,overflow:"hidden"},children:[g&&a(g,m),(0,s.jsx)("img",{src:b.url,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:`${100*v.x}% ${100*v.y}%`,filter:g?`url(#${m})`:void 0}}),(0,s.jsx)("div",{className:"reveal-frames-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:n(u,x),pointerEvents:"none"}})]}):(0,s.jsx)("div",{className:"reveal-frames-no-image",style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%)",border:"2px dashed #ccc",borderRadius:"4px"},children:(0,s.jsx)("span",{style:{color:"#757575",fontSize:"14px",fontWeight:500,padding:"12px 20px",background:"rgba(255, 255, 255, 0.9)",borderRadius:"4px"},children:(0,t.__)("No background image","caes-reveal")})}),(0,s.jsx)("div",{className:"reveal-frames-label",style:{position:"absolute",top:"12px",left:"12px",zIndex:10,background:"rgba(0, 0, 0, 0.75)",color:"#fff",padding:"6px 12px",fontSize:"12px",fontWeight:600,borderRadius:"4px",textTransform:"uppercase",letterSpacing:"0.5px",pointerEvents:"none"},children:c||(0,t.__)("Frame Content","caes-reveal")}),(0,s.jsx)("div",{...y})]})},save:({attributes:e})=>{const{frameIndex:t}=e,a=r.useBlockProps.save({className:"reveal-frame-content","data-frame-index":t});return(0,s.jsx)("div",{...a,children:(0,s.jsx)(r.InnerBlocks.Content,{})})}})})();