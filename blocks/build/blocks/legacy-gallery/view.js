(()=>{function e(e){const t=e.querySelector("[data-gallery-main]"),a=e.querySelector("[data-gallery-caption]"),n=e.querySelectorAll("[data-gallery-thumb]"),r=e.querySelector("[data-gallery-sr-current]");if(!t||!n.length)return;let s=0;const c=n.length;function o(e){if(e<0||e>=c||e===s)return;const o=n[e],l=o.dataset.imageUrl,i=o.dataset.imageAlt,d=o.dataset.imageWidth,u=o.dataset.imageHeight,h=o.dataset.imageCaption;var g;t.src=l,t.alt=i,t.width=d,t.height=u,a&&(h?(a.innerHTML=h,a.classList.remove("sr-only")):(a.innerHTML=`Image ${e+1} of ${c}`,a.classList.add("sr-only"))),g=e,n.forEach(((e,t)=>{const a=t===g;e.classList.toggle("active",a),e.setAttribute("aria-selected",a.toString()),e.tabIndex=a?0:-1})),r&&(r.textContent=`Showing image ${e+1} of ${c}`),s=e}n.forEach(((e,t)=>{e.addEventListener("click",(()=>{o(t)})),e.addEventListener("keydown",(e=>{!function(e,t){let a=t,r=!1;switch(e.key){case"ArrowLeft":a=t>0?t-1:c-1,r=!0;break;case"ArrowRight":a=t<c-1?t+1:0,r=!0;break;case"Home":a=0,r=!0;break;case"End":a=c-1,r=!0;break;case"Enter":case" ":o(t),r=!0}r&&(e.preventDefault(),["ArrowLeft","ArrowRight","Home","End"].includes(e.key)&&(n[a].focus(),o(a)))}(e,t)}))})),function(){let e=null,a=null;t.addEventListener("touchstart",(t=>{e=t.touches[0].clientX,a=t.touches[0].clientY}),{passive:!0}),t.addEventListener("touchend",(t=>{if(!e||!a)return;const n=t.changedTouches[0].clientX,r=t.changedTouches[0].clientY,l=n-e,i=r-a;Math.abs(l)>Math.abs(i)&&Math.abs(l)>50&&o(l>0?s>0?s-1:c-1:s<c-1?s+1:0),e=null,a=null}),{passive:!0})}();const l=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&l.unobserve(e.target)}))}),{threshold:.5});l.observe(e)}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".legacy-gallery-block").forEach(e)}))})();