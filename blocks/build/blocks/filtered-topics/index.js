(()=>{"use strict";var e,s={7578:()=>{const e=window.wp.blocks,s=window.wp.blockEditor,o=window.wp.components,i=window.wp.i18n,t=window.wp.data,n=window.wp.coreData,c=window.ReactJSXRuntime,a=JSON.parse('{"UU":"caes-hub/filtered-topics"}');(0,e.registerBlockType)(a.UU,{edit:function({attributes:e,setAttributes:a}){const{showHierarchy:l,showPostCounts:r,displayAsDropdown:h,showHeading:p,customHeading:d,filterByContext:u,emptyMessage:g}=e,b=(0,s.useBlockProps)({className:"caes-hub-filtered-topics"}),{topics:w,isLoading:_}=(0,t.useSelect)((e=>{const{getEntityRecords:s,isResolving:o}=e(n.store);return{topics:s("taxonomy","topics",{hide_empty:!0,per_page:10}),isLoading:o("getEntityRecords",["taxonomy","topics",{hide_empty:!0,per_page:10}])}}),[]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(s.InspectorControls,{children:[(0,c.jsxs)(o.PanelBody,{title:(0,i.__)("Display Settings","caes-hub"),initialOpen:!0,children:[(0,c.jsx)(o.ToggleControl,{label:(0,i.__)("Filter by current section","caes-hub"),help:(0,i.__)("Only show topics that have content in the current section (publications, events, etc.)","caes-hub"),checked:u,onChange:e=>a({filterByContext:e})}),(0,c.jsx)(o.ToggleControl,{label:(0,i.__)("Display as dropdown","caes-hub"),checked:h,onChange:e=>a({displayAsDropdown:e})}),!h&&(0,c.jsx)(o.ToggleControl,{label:(0,i.__)("Show hierarchy","caes-hub"),help:(0,i.__)("Display topics in hierarchical structure with parent-child relationships","caes-hub"),checked:l,onChange:e=>a({showHierarchy:e})}),(0,c.jsx)(o.ToggleControl,{label:(0,i.__)("Show post counts","caes-hub"),checked:r,onChange:e=>a({showPostCounts:e})})]}),(0,c.jsxs)(o.PanelBody,{title:(0,i.__)("Heading Settings","caes-hub"),initialOpen:!1,children:[(0,c.jsx)(o.ToggleControl,{label:(0,i.__)("Show heading","caes-hub"),checked:p,onChange:e=>a({showHeading:e})}),p&&(0,c.jsx)(o.TextControl,{label:(0,i.__)("Custom heading text","caes-hub"),value:d,onChange:e=>a({customHeading:e}),placeholder:(0,i.__)("Topics","caes-hub")})]}),(0,c.jsx)(o.PanelBody,{title:(0,i.__)("Messages","caes-hub"),initialOpen:!1,children:(0,c.jsx)(o.TextControl,{label:(0,i.__)("Empty state message","caes-hub"),help:(0,i.__)("Message to show when no topics are found","caes-hub"),value:g,onChange:e=>a({emptyMessage:e}),placeholder:(0,i.__)("No topics found for this section.","caes-hub")})})]}),(0,c.jsxs)("div",{...b,children:[p&&d&&(0,c.jsx)("h3",{className:"topics-heading",children:d}),(0,c.jsxs)("div",{className:"topics-preview-wrapper",children:[(0,c.jsx)("div",{className:"topics-preview-label",children:(0,c.jsx)("small",{children:(0,c.jsxs)("em",{children:[(0,i.__)("Block Preview:","caes-hub")," ",u?(0,i.__)("Will filter by current section on frontend","caes-hub"):(0,i.__)("Showing all topics","caes-hub")]})})}),(()=>{if(_)return(0,c.jsxs)("div",{className:"topics-loading",children:[(0,c.jsx)(o.Spinner,{}),(0,c.jsx)("p",{children:(0,i.__)("Loading topics...","caes-hub")})]});if(!w||0===w.length)return(0,c.jsx)("p",{className:"topics-empty-message",children:g});const e=w.slice(0,5);return h?(0,c.jsx)("div",{className:"topics-dropdown-wrapper",children:(0,c.jsxs)("select",{className:"topics-dropdown",disabled:!0,children:[(0,c.jsxs)("option",{children:["Select ",d]}),e.map((e=>(0,c.jsxs)("option",{children:[e.name,r&&` (${e.count})`]},e.id)))]})}):(0,c.jsxs)("ul",{className:"topics-list"+(l?" topics-hierarchical":""),children:[e.map((e=>(0,c.jsxs)("li",{className:`topic-item topic-item-${e.id}`,children:[(0,c.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),children:e.name}),r&&(0,c.jsxs)("span",{className:"post-count",children:["(",e.count,")"]})]},e.id))),w.length>5&&(0,c.jsx)("li",{className:"topic-item-preview-notice",children:(0,c.jsx)("em",{children:(0,i.__)("... and %d more topics","caes-hub").replace("%d",w.length-5)})})]})})()]})]})]})}})}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return s[e](n,n.exports,i),n.exports}i.m=s,e=[],i.O=(s,o,t,n)=>{if(!o){var c=1/0;for(h=0;h<e.length;h++){for(var[o,t,n]=e[h],a=!0,l=0;l<o.length;l++)(!1&n||c>=n)&&Object.keys(i.O).every((e=>i.O[e](o[l])))?o.splice(l--,1):(a=!1,n<c&&(c=n));if(a){e.splice(h--,1);var r=t();void 0!==r&&(s=r)}}return s}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[o,t,n]},i.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={2587:0,1043:0};i.O.j=s=>0===e[s];var s=(s,o)=>{var t,n,[c,a,l]=o,r=0;if(c.some((s=>0!==e[s]))){for(t in a)i.o(a,t)&&(i.m[t]=a[t]);if(l)var h=l(i)}for(s&&s(o);r<c.length;r++)n=c[r],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(h)},o=globalThis.webpackChunktheme_blocks=globalThis.webpackChunktheme_blocks||[];o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o))})();var t=i.O(void 0,[1043],(()=>i(7578)));t=i.O(t)})();