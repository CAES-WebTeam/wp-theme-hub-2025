// These styles are used to cleanup the content that was imported from our older systems.


// All of these changes apply to just this div, where the content is imported
.classic-content-wrapper {

    // all the img classes to keep track of
    // figure.image,
    // figure.center,
    // figure.align-right,
    // figure.align-left,
    // img.image-left,
    // img.image-right,
    // img.image-center,
    // div.left img.image-left,
    // div.right img.image-right,
    // figure:not([class])

    // IMAGES

    /* Legacy figure layout */
    figure.legacy-figure {
        display: table;
        border-spacing: 0;
        max-width: var(--wp--style--global--content-size);
        width: auto !important;
        font-size: 0;
        margin: 0 auto;
        clear: both;

        img.legacy-image {
            max-width: 100%;
            height: auto;
            box-sizing: border-box;
            vertical-align: bottom;
            margin-left: 0 !important;
            margin-inline-end: unset !important;
            margin-bottom: 0;
            // Important for showing alt text if image isn't loading
            font-size: initial;
        }

        table.legacy-table {
            font-size: initial;
        }

        figcaption {
            background-color: var(--wp--preset--color--base-two);
            color: var(--wp--preset--color--contrast);
            font-size: var(--wp--preset--font-size--small);
            padding: var(--wp--preset--spacing--30) var(--wp--preset--spacing--40);
            width: auto !important;
            caption-side: bottom;
            display: table-caption;

            &.legacy-table-caption {
                caption-side: top;
                text-align: center;
            }
        }

        &.legacy-figure-right {
            float: right;
            max-width: 50%;
            margin-left: var(--wp--style--block-gap) !important;
            margin-bottom: var(--wp--style--block-gap) !important;
            margin-inline-end: calc((100% - var(--wp--style--global--content-size)) / 2 - var(--wp--preset--spacing--70)) !important;
            clear: both;
            // &:first-child {
            //     margin-left: 0 !important;
            //     max-width: 100% !important;
            //     width: 100% !important;
            //     float: none !important;
            // }
        }

        &.legacy-figure-left {
            float: left;
            max-width: 50%;
            margin-right: var(--wp--style--block-gap) !important;
            margin-bottom: var(--wp--style--block-gap) !important;
            margin-inline-start: calc((100% - var(--wp--style--global--content-size)) / 2 - var(--wp--preset--spacing--70)) !important;
            clear: both;
        }

        &.legacy-figure-center {
            margin: 0 auto;
        }

        @container caespost (max-width: 840px) {
            &.legacy-figure-right {
                margin-inline-end: 0 !important;
            }

            &.legacy-figure-left {
                margin-inline-start: 0 !important;
            }
        }

        @media (max-width: 768px) {

            &.legacy-figure-right,
            &.legacy-figure-left {
                float: none;
                max-width: 100% !important;
                width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
            }
        }

    }

    /* Legacy images */
    img.legacy-image {
        max-width: 100%;
        height: auto;
        clear: both;
    }

    // Legacy divs
    div.legacy-div {
        display: block !important;
        max-width: 100%;
        clear: both;
        margin: 0 auto;

        &.right {
            float: right;
            clear: both;
            margin-left: var(--wp--style--block-gap) !important;
            margin-bottom: var(--wp--style--block-gap) !important;
            margin-inline-end: calc((100% - var(--wp--style--global--content-size)) / 2 - var(--wp--preset--spacing--70)) !important;
            max-width: 50%;
        }

        &.left {
            float: left;
            clear: both;
            margin-right: var(--wp--style--block-gap) !important;
            margin-bottom: var(--wp--style--block-gap) !important;
            margin-inline-start: calc((100% - var(--wp--style--global--content-size)) / 2 - var(--wp--preset--spacing--70)) !important;
            max-width: 50%;
        }

        &.right,
        &.left {

            figure.legacy-figure,
            img.legacy-image {
                float: unset !important;
                margin-right: 0 !important;
                margin-left: 0 !important;
                margin-inline-start: unset !important;
                max-width: 100%;
            }
        }

        @container caespost (max-width: 840px) {
            &.right {
                margin-inline-end: 0 !important;
            }

            &.left {
                margin-inline-start: 0 !important;
            }
        }

        @media (max-width: 768px) {


            &.right,
            &.left {
                float: none;
                margin-left: 0 !important;
                margin-right: 0 !important;
                max-width: 100% !important;
            }
        }

    }

    /* Responsive tweaks */
    @media (max-width: 768px) {

        img.legacy-image {
            width: 100%;
            margin-bottom: var(--wp--style--block-gap);
        }
    }


    // SEPARATOR / <hr>

    hr:not(.wp-block-separator) {
        border: 0;
        border-top: 1px solid var(--wp--preset--color--base-three);
    }

    // TABLES

    table.hstripe tr:nth-child(odd),
    table.vstripe td:nth-child(odd) {
        background-color: var(--wp--preset--color--base-two);
    }

    table:not(.wp-block-table table) {

        border-collapse: collapse;

        thead,
        tbody,
        tfoot {

            td,
            th {
                min-width: 110px;
                border: 1px solid var(--wp--preset--color--base-three);
                padding: var(--wp--preset--spacing--20);
                line-height: 1.5;
                vertical-align: baseline;
            }
        }

        thead {
            font-weight: bold;
        }
    }

    // Definition lists

    .legacy-dl {
        border: 1px solid var(--wp--preset--color--base-three);
        border-top: 0;

        dt,
        dt p {
            background: var(--wp--preset--color--base-two);
            font-weight: 600;
            padding: var(--wp--preset--spacing--20);
        }

        dd {
            margin: var(--wp--preset--spacing--20);
        }
    }

}

// First image in a story override

.single-post .classic-content-wrapper>figure.legacy-figure-right:not([class^="wp-"]):has(img):first-child {
    margin-inline-end: calc((100% - var(--wp--style--global--content-size)) / 2 - var(--wp--preset--spacing--70)) !important;
    margin-inline-start: calc((100% - var(--wp--style--global--content-size)) / 2 - var(--wp--preset--spacing--70)) !important;
    max-width: calc(100% + var(--wp--preset--spacing--70) * 2) !important;
    width: calc(100% + var(--wp--preset--spacing--70) * 2) !important;

    @container caespost (max-width: 840px) {
        margin-inline-end: 0 !important;
        margin-inline-start: 0 !important;
        max-width: 100% !important;
        width: 100% !important;
    }
}